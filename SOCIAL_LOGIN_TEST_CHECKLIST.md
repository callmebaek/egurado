# 소셜 로그인 테스트 체크리스트

## ✅ 완료된 테스트 (2026-01-20)

### 1. 이메일 회원가입 및 로그인
- [x] 신규 회원가입
- [x] 로그인
- [x] 프로필 조회
- [x] 온보딩 완료
- [x] 매장 등록
- [x] 매장 목록 조회 (test@example.com: 21개 매장)

### 2. 카카오 로그인
- [x] 신규 가입
- [x] 기존 사용자 로그인
- [x] 프로필 조회
- [x] 온보딩 완료
- [x] 매장 등록
- [x] 매장 목록 조회

### 3. 네이버 로그인
- [x] 신규 가입
- [x] 기존 사용자 로그인
- [x] 프로필 조회
- [x] 온보딩 완료
- [x] 매장 등록
- [x] 매장 목록 조회

### 4. 대시보드 기능
- [x] 네이버 플레이스 순위 조회
- [x] 리뷰 관리
- [x] 경쟁사 분석
- [x] 플레이스 진단
- [x] 내 매장 등록

---

## 🔍 디버깅 가이드

### 로그인 실패 시

1. **브라우저 콘솔 확인 (F12 → Console)**
   ```javascript
   // 에러 메시지 확인
   "카카오 로그인 오류: ..."
   "네이버 로그인 오류: ..."
   ```

2. **네트워크 탭 확인 (F12 → Network)**
   - `/api/v1/auth/kakao` 요청 상태 코드
   - `/api/v1/auth/naver` 요청 상태 코드
   - 응답 본문의 에러 메시지

3. **백엔드 로그 확인**
   ```bash
   # Railway 또는 로컬 서버 로그
   카카오 토큰 요청: ...
   카카오 사용자 정보: ...
   프로필 생성 실패: ...
   ```

### RLS 에러 발생 시

에러 메시지:
```
new row violates row-level security policy for table "XXX"
code: 42501
```

**해결 방법:**
1. Supabase Dashboard → SQL Editor
2. RLS 상태 확인:
   ```sql
   SELECT tablename, rowsecurity 
   FROM pg_tables 
   WHERE schemaname = 'public';
   ```
3. 모든 사용자 테이블이 `rowsecurity = false`인지 확인

### 매장 조회 실패 시

1. **JWT 토큰 확인**
   - 로컬스토리지에 `access_token` 존재 확인
   - jwt.io에서 토큰 디코드하여 `user_id` 확인

2. **API 요청 확인**
   ```javascript
   // 네트워크 탭에서 확인
   GET /api/v1/stores/list/{user_id}
   Authorization: Bearer {token}
   ```

3. **데이터베이스 직접 확인**
   ```sql
   SELECT * FROM stores WHERE user_id = 'xxx';
   ```

---

## 🎯 테스트 시나리오

### 시나리오 1: 신규 카카오 사용자
1. 로그인 페이지에서 "카카오로 시작하기" 클릭
2. 카카오 로그인 완료
3. 온보딩 페이지로 이동
4. 온보딩 정보 입력
5. 대시보드로 이동
6. "내 매장 등록" 메뉴로 이동
7. 네이버 플레이스 URL 입력하여 매장 등록
8. 매장 목록에 표시 확인

### 시나리오 2: 기존 이메일 사용자
1. test@example.com으로 로그인
2. 대시보드에서 21개 매장 확인
3. 각 메뉴 정상 작동 확인
   - 네이버 플레이스 순위
   - 리뷰 관리
   - 경쟁사 분석
   - 플레이스 진단

### 시나리오 3: 네이버 로그인 → 매장 등록
1. 로그인 페이지에서 "네이버로 시작하기" 클릭
2. 네이버 로그인 완료
3. 온보딩 완료
4. 매장 등록 성공 확인
5. 등록한 매장이 목록에 표시되는지 확인

---

## 📊 예상 결과

### 성공 케이스
- ✅ 로그인 성공 시 → 온보딩 또는 대시보드로 이동
- ✅ 매장 등록 성공 → "매장이 등록되었습니다" 알림
- ✅ 매장 목록 조회 → 등록된 매장들이 카드 형태로 표시

### 실패 케이스 (발생하지 않아야 함)
- ❌ RLS 정책 에러
- ❌ JWT 토큰 없음
- ❌ 매장 목록 빈 상태 (등록된 매장이 있는 경우)

---

**최종 테스트 완료일:** 2026-01-20  
**테스트 결과:** ✅ 모든 시나리오 성공
