(íŒŒì¼ì˜ ê¸°ì¡´ ë‚´ìš©ì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ íŒŒì¼ ëì— ì¶”ê°€)

=====================================
## ì„¸ì…˜ 18: ì£¼ìš”ì§€í‘œ ì¶”ì  UI/UX ëŒ€í­ ê°œì„  ë° ì†Œì…œ ë¡œê·¸ì¸ ë§¤ì¥ ì—°ê²° ë¬¸ì œ í•´ê²°
=====================================

**ì‘ì—… ê¸°ê°„:** 2026-01-21 (ì˜¤í›„)  
**ì£¼ìš” ëª©í‘œ:** ì£¼ìš”ì§€í‘œ ì¶”ì  í˜ì´ì§€ì˜ ì‚¬ìš©ì ê²½í—˜ ê°œì„  ë° ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ë§¤ì¥ ì—°ê²° ë¬¸ì œ í•´ê²°

---

### ğŸ“Š 1. ì£¼ìš”ì§€í‘œ ì¶”ì  UI/UX ëŒ€í­ ê°œì„ 

#### 1.1 ëª¨ë‹¬ ë‹¤ì´ì–¼ë¡œê·¸ ë„ì…
**ë¬¸ì œ:** 
- ì§€í‘œë¥¼ ë³´ë ¤ë©´ í˜ì´ì§€ í•˜ë‹¨ê¹Œì§€ ìŠ¤í¬ë¡¤í•´ì•¼ í•¨
- ì„¤ì • ë³€ê²½ ì‹œ UIê°€ ì¹´ë“œ ë‚´ë¶€ì—ì„œ í¼ì³ì ¸ ë³µì¡í•¨

**í•´ê²°:**
```typescript
// frontend/components/ui/dialog.tsx ìƒì„±
import * as DialogPrimitive from "@radix-ui/react-dialog"

const Dialog = DialogPrimitive.Root
const DialogTrigger = DialogPrimitive.Trigger
const DialogContent = React.forwardRef<...>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      className="fixed left-[50%] top-[50%] z-50 w-full max-w-4xl translate-x-[-50%] translate-y-[-50%] ..."
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 ...">
        <X className="h-4 w-4" />
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
```

**ë³€ê²½ ì‚¬í•­:**
- âœ… **ì§€í‘œ ë³´ê¸° ëª¨ë‹¬:** ì°¨íŠ¸ì™€ í…Œì´ë¸”ì„ ëª¨ë‹¬ë¡œ í‘œì‹œ
- âœ… **ì„¤ì • ëª¨ë‹¬:** ìŠ¤ì¼€ì¤„ëŸ¬ ë° ì•Œë¦¼ ì„¤ì •ì„ ë³„ë„ ëª¨ë‹¬ë¡œ ë¶„ë¦¬
- âœ… **ë°˜ì‘í˜• ë””ìì¸:** ëª¨ë°”ì¼/íƒœë¸”ë¦¿/PC ëª¨ë‘ ìµœì í™”

#### 1.2 ë¦¬ë·° ë³€ë™ê°’ ì¶”ê°€
**ìš”ì²­:** í…Œì´ë¸”ì— ìˆœìœ„ ë³€ë™ë¿ë§Œ ì•„ë‹ˆë¼ ë°©ë¬¸ìë¦¬ë·°, ë¸”ë¡œê·¸ë¦¬ë·° ë³€ë™ë„ í‘œì‹œ

**êµ¬í˜„:**
```typescript
// frontend/app/dashboard/naver/metrics-tracker/page.tsx
{dailyMetrics.map((metric, index) => {
  const prevMetric = dailyMetrics[index + 1]
  const visitorReviewChange = prevMetric 
    ? metric.visitor_review_count - prevMetric.visitor_review_count 
    : null
  const blogReviewChange = prevMetric 
    ? metric.blog_review_count - prevMetric.blog_review_count 
    : null

  return (
    <tr key={metric.id}>
      <td>{new Date(metric.collection_date).toLocaleDateString('ko-KR')}</td>
      <td>{metric.rank}ìœ„</td>
      <td>
        {metric.rank_change ? (
          <span className={metric.rank_change > 0 ? 'text-green-600' : 'text-red-600'}>
            {metric.rank_change > 0 ? <TrendingUp /> : <TrendingDown />}
            {Math.abs(metric.rank_change)}
          </span>
        ) : '-'}
      </td>
      <td>
        <Users className="w-3 h-3" />
        {metric.visitor_review_count.toLocaleString()}ê°œ
      </td>
      <td>
        {visitorReviewChange !== null && visitorReviewChange !== 0 ? (
          <span className={visitorReviewChange > 0 ? 'text-red-600' : 'text-blue-600'}>
            {visitorReviewChange > 0 ? 'â†‘' : 'â†“'}{Math.abs(visitorReviewChange)}
          </span>
        ) : '-'}
      </td>
      <td>
        <FileText className="w-3 h-3" />
        {metric.blog_review_count.toLocaleString()}ê°œ
      </td>
      <td>
        {blogReviewChange !== null && blogReviewChange !== 0 ? (
          <span className={blogReviewChange > 0 ? 'text-red-600' : 'text-blue-600'}>
            {blogReviewChange > 0 ? 'â†‘' : 'â†“'}{Math.abs(blogReviewChange)}
          </span>
        ) : '-'}
      </td>
    </tr>
  )
})}
```

**í…Œì´ë¸” êµ¬ì¡°:**
| ë‚ ì§œ | ìˆœìœ„ | ìˆœìœ„ ë³€ë™ | ë°©ë¬¸ìë¦¬ë·° | ë¦¬ë·° ë³€ë™ | ë¸”ë¡œê·¸ë¦¬ë·° | ë¦¬ë·° ë³€ë™ |
|------|------|-----------|-----------|----------|-----------|----------|

---

### ğŸ¨ 2. ì¶”ì  ì¹´ë“œ UI ê°œì„ 

#### 2.1 ì¹´ë“œ ë ˆì´ì•„ì›ƒ ì¬ì„¤ê³„
**ë³€ê²½ ì „:** ë‹¨ìˆœ ë¦¬ìŠ¤íŠ¸ í˜•íƒœ
**ë³€ê²½ í›„:** ê·¸ë¦¬ë“œ ì¹´ë“œ ë ˆì´ì•„ì›ƒ (ë°˜ì‘í˜•)

```typescript
// ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
<div className="grid gap-4 md:grid-cols-1 lg:grid-cols-2">
  {trackers.map((tracker) => (
    <Card key={tracker.id} className="p-5 hover:shadow-md transition-shadow">
      {/* ì¹´ë“œ ë‚´ìš© */}
    </Card>
  ))}
</div>
```

**ë””ìì¸ ê°œì„ :**
- âœ… ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ
- âœ… ì •ë³´ êµ¬ì¡°í™” (í—¤ë”, ì •ë³´, ë²„íŠ¼ ê·¸ë£¹)
- âœ… í˜¸ë²„ íš¨ê³¼ ì¶”ê°€
- âœ… ì•„ì´ì½˜ ì¶”ê°€ (BarChart3, Bell, Users, FileText)

#### 2.2 ìµœê·¼ ì§€í‘œ ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€
**ìš”ì²­:** ì¹´ë“œ 1ì‚¬ë¶„ë©´ì˜ ë¹ˆ ê³µê°„ì— ìµœê·¼ ìˆ˜ì§‘ëœ ì§€í‘œ í‘œì‹œ

**êµ¬í˜„:**
```typescript
// ìµœê·¼ 2ê°œì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ë³€ë™ê°’ ê³„ì‚°
const [latestMetrics, setLatestMetrics] = useState<Record<string, DailyMetric | null>>({})
const [previousMetrics, setPreviousMetrics] = useState<Record<string, DailyMetric | null>>({})

const loadLatestMetrics = async (trackerList: MetricTracker[], token: string | null) => {
  const latestMap: Record<string, DailyMetric | null> = {}
  const previousMap: Record<string, DailyMetric | null> = {}
  
  await Promise.all(
    trackerList.map(async (tracker) => {
      const response = await fetch(`${api.baseUrl}/api/v1/metrics/trackers/${tracker.id}/metrics`, {
        headers: { 'Authorization': `Bearer ${token}` }
      })
      const data = await response.json()
      latestMap[tracker.id] = data.metrics?.[0] || null
      previousMap[tracker.id] = data.metrics?.[1] || null
    })
  )
  
  setLatestMetrics(latestMap)
  setPreviousMetrics(previousMap)
}
```

**UI ë””ìì¸:**
```typescript
<div className="grid grid-cols-3 gap-2">
  {/* ìˆœìœ„ */}
  <div className="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg px-2 py-2.5">
    <div className="text-[10px] text-blue-600 font-medium">ìˆœìœ„</div>
    <span className="text-xl font-bold text-blue-700">
      {latestMetrics[tracker.id].rank}
    </span>
    {/* ì „ì¼ ëŒ€ë¹„ ë³€ë™ */}
    {previousMetrics[tracker.id] && (() => {
      const change = latestMetrics[tracker.id].rank - previousMetrics[tracker.id].rank
      return change !== 0 ? (
        <span className={change > 0 ? 'text-red-600' : 'text-blue-600'}>
          {change > 0 ? 'â†“' : 'â†‘'}{Math.abs(change)}
        </span>
      ) : <span className="text-gray-400">-</span>
    })()}
    {!previousMetrics[tracker.id] && <span className="text-gray-400">ì‹ ê·œ</span>}
  </div>
  
  {/* ë°©ë¬¸ìë¦¬ë·° */}
  <div className="bg-gradient-to-br from-green-50 to-green-100 rounded-lg">
    <Users className="w-3 h-3" />
    <span>ë°©ë¬¸ì</span>
    <span className="font-bold">{visitorCount}</span>
    {/* ë³€ë™ê°’ */}
  </div>
  
  {/* ë¸”ë¡œê·¸ë¦¬ë·° */}
  <div className="bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg">
    <FileText className="w-3 h-3" />
    <span>ë¸”ë¡œê·¸</span>
    <span className="font-bold">{blogCount}</span>
    {/* ë³€ë™ê°’ */}
  </div>
</div>
```

**ê¸°ëŠ¥:**
- âœ… ìˆœìœ„, ë°©ë¬¸ìë¦¬ë·°, ë¸”ë¡œê·¸ë¦¬ë·° 3ê°œ ì§€í‘œ í‘œì‹œ
- âœ… ì „ì¼ ëŒ€ë¹„ ë³€ë™ê°’ í‘œì‹œ (ìƒ‰ìƒ + í™”ì‚´í‘œ)
- âœ… ìˆœìœ„: ì˜¬ë¼ê°€ë©´ íŒŒë€ìƒ‰ â†‘, ë‚´ë ¤ê°€ë©´ ë¹¨ê°„ìƒ‰ â†“
- âœ… ë¦¬ë·°: ì¦ê°€í•˜ë©´ ë¹¨ê°„ìƒ‰ â†‘, ê°ì†Œí•˜ë©´ íŒŒë€ìƒ‰ â†“
- âœ… ë°ì´í„° ì—†ì„ ë•Œ: "ë°ì´í„° ì—†ìŒ" í‘œì‹œ
- âœ… ì „ì¼ ë°ì´í„° ì—†ì„ ë•Œ: "ì‹ ê·œ" í‘œì‹œ
- âœ… "ì§€ê¸ˆ ìˆ˜ì§‘" í›„ ìë™ ê°±ì‹ 

---

### ğŸ› 3. ë²„ê·¸ ìˆ˜ì •

#### 3.1 `isSavingSettings` ìƒíƒœ ëˆ„ë½
**ë¬¸ì œ:** ì„¤ì • ëª¨ë‹¬ì—ì„œ "ì €ì¥" ë²„íŠ¼ í´ë¦­ ì‹œ ì—ëŸ¬ ë°œìƒ
```
Uncaught ReferenceError: isSavingSettings is not defined
```

**í•´ê²°:**
```typescript
// frontend/app/dashboard/naver/metrics-tracker/page.tsx
const [isSavingSettings, setIsSavingSettings] = useState(false)

const handleSaveSettings = async (trackerId: string) => {
  setIsSavingSettings(true)
  try {
    // ì„¤ì • ì €ì¥ ë¡œì§
  } finally {
    setIsSavingSettings(false)
  }
}
```

---

### ğŸ”§ 4. ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ë§¤ì¥ ì—°ê²° ë¬¸ì œ í•´ê²°

#### 4.1 ë¬¸ì œ ìƒí™©
**ì¦ìƒ:**
- ì´ë©”ì¼ ê³„ì •: ë§¤ì¥ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë¨
- ì†Œì…œ ë¡œê·¸ì¸ ê³„ì •: ë§¤ì¥ì´ 0ê°œë¡œ í‘œì‹œë¨

**Sequential Thinking ë¶„ì„ ê³¼ì •:**

1. **ê°€ì„¤ 1:** stores í…Œì´ë¸”ì˜ user_idê°€ ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ìì™€ ë§¤ì¹­ë˜ì§€ ì•ŠìŒ
2. **ê°€ì„¤ 2:** RLS ì •ì±…ìœ¼ë¡œ ì¸í•´ auth.uid()ê°€ nullì´ë©´ ë°ì´í„° ì¡°íšŒ ë¶ˆê°€
3. **í™•ì¸:** stores í…Œì´ë¸”ì€ service_roleë¡œ ì¡°íšŒí•˜ë¯€ë¡œ RLS ë¬¸ì œ ì•„ë‹˜
4. **ì§„ë‹¨:** í”„ë¡ íŠ¸ì—”ë“œê°€ ì „ë‹¬í•˜ëŠ” user_id í™•ì¸ í•„ìš”

#### 4.2 ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€

**ë°±ì—”ë“œ (stores.py):**
```python
async def list_stores(user_id: UUID):
    try:
        supabase = get_supabase_client()
        
        # ë””ë²„ê¹…: user_id ë¡œê¹…
        logger.info(f"[DEBUG] list_stores called with user_id: {user_id}")
        
        result = supabase.table("stores").select("*").eq(
            "user_id", str(user_id)
        ).order("created_at", desc=True).execute()
        
        # ë””ë²„ê¹…: ì¡°íšŒ ê²°ê³¼ ë¡œê¹…
        logger.info(f"[DEBUG] list_stores found {len(result.data) if result.data else 0} stores")
```

**ë°±ì—”ë“œ (auth.py):**
```python
# ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
if existing_user.data and len(existing_user.data) > 0:
    user_data = existing_user.data[0]
    user_id = user_data["id"]
    print(f"[DEBUG] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ - ê¸°ì¡´ ì‚¬ìš©ì: user_id={user_id}, email={email}")

# ë„¤ì´ë²„ ë¡œê·¸ì¸
if existing_user.data and len(existing_user.data) > 0:
    user_data = existing_user.data[0]
    user_id = user_data["id"]
    print(f"[DEBUG] ë„¤ì´ë²„ ë¡œê·¸ì¸ - ê¸°ì¡´ ì‚¬ìš©ì: user_id={user_id}, email={email}")
```

**í”„ë¡ íŠ¸ì—”ë“œ (useStores.ts):**
```typescript
// ë””ë²„ê¹…: user ì •ë³´ ë¡œê¹…
console.log("[DEBUG] useStores - user:", user)
console.log("[DEBUG] useStores - user.id:", user.id)

const response = await fetch(api.stores.list(user.id))

if (!response.ok) {
  console.error("[DEBUG] useStores - API ì‹¤íŒ¨:", response.status)
}

const data = await response.json()
console.log("[DEBUG] useStores - API ì‘ë‹µ:", data)
console.log("[DEBUG] useStores - ë§¤ì¥ ê°œìˆ˜:", data.stores?.length || 0)
```

#### 4.3 ì›ì¸ íŒŒì•…

**í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
```
í”„ë¡ íŠ¸ì—”ë“œ ì½˜ì†”:
[DEBUG] useStores - API ì‘ë‹µ: {status: 'success', stores: Array(0), total_count: 0}
[DEBUG] useStores - ë§¤ì¥ ê°œìˆ˜: 0

ë°±ì—”ë“œ ë¡œê·¸:
INFO: 172.18.0.1:37842 - "GET /api/v1/stores/?user_id=d06a0818-aaa2-4a95-9372-2697364fe122" 200 OK

Supabase ì¿¼ë¦¬ ê²°ê³¼:
SELECT id, user_id, store_name FROM stores 
WHERE user_id = 'd06a0818-aaa2-4a95-9372-2697364fe122'::uuid
â†’ ê²°ê³¼: "ì‚°ì„ ìŠ¤ì‹œ" ë§¤ì¥ 1ê°œ ì¡´ì¬
```

**ë°œê²¬:**
- âœ… user_idëŠ” ì •í™•í•¨: `d06a0818-aaa2-4a95-9372-2697364fe122`
- âœ… ë°ì´í„°ë² ì´ìŠ¤ì— ë§¤ì¥ ì¡´ì¬í•¨
- âŒ ë°±ì—”ë“œê°€ ë§¤ì¥ 0ê°œ ë°˜í™˜ â†’ **ì½”ë“œ ë¬¸ì œ ì•„ë‹Œ ì»¨í…Œì´ë„ˆ ë¬¸ì œ**

#### 4.4 í•´ê²°: Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

**ì›ì¸:** 
ë°±ì—”ë“œ ì½”ë“œ ë³€ê²½ í›„ Docker ì»¨í…Œì´ë„ˆê°€ ì¬ì‹œì‘ë˜ì§€ ì•Šì•„ ìƒˆ ì½”ë“œê°€ ì ìš©ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
```bash
# EC2 ì„œë²„ì—ì„œ ì‹¤í–‰
cd ~/egurado/backend
docker-compose down
docker-compose up -d --build
```

**ê²°ê³¼:**
```
Stopping egurado-api ... done
Removing egurado-api ... done
Building egurado-api
Successfully built b920abd1dcfe
Creating egurado-api ... done
```

**í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
- âœ… ì†Œì…œ ë¡œê·¸ì¸ í›„ ë§¤ì¥ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë¨
- âœ… ì´ë©”ì¼ ê³„ì •ë„ ì •ìƒ ì‘ë™
- âœ… ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™

---

### ğŸ“¦ ë°°í¬ ë° í…ŒìŠ¤íŠ¸

#### ì»¤ë°‹ ë‚´ì—­
```bash
# 1. UI ê°œì„ 
feat: ì£¼ìš”ì§€í‘œ ì¶”ì  UI ê°œì„ 
- ì§€í‘œ ë³´ê¸°ë¥¼ ëª¨ë‹¬ë¡œ ë³€ê²½í•˜ì—¬ ìŠ¤í¬ë¡¤ ë¶ˆí•„ìš”
- ì„¤ì •ë„ ëª¨ë‹¬ë¡œ ë³€ê²½í•˜ì—¬ UX ê°œì„ 
- í…Œì´ë¸”ì— ë°©ë¬¸ìë¦¬ë·°/ë¸”ë¡œê·¸ë¦¬ë·° ë³€ë™ ì¶”ê°€
- ì¶”ì  ëª©ë¡ì„ ê·¸ë¦¬ë“œ ì¹´ë“œ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ê°œì„  (ë°˜ì‘í˜•)
- ì•„ì´ì½˜ ì¶”ê°€ ë° ì •ë³´ êµ¬ì¡°í™”ë¡œ ê°€ë…ì„± í–¥ìƒ

# 2. isSavingSettings ë²„ê·¸ ìˆ˜ì •
fix: isSavingSettings ìƒíƒœ ë³€ìˆ˜ ëˆ„ë½ ìˆ˜ì •
- ì„¤ì • ì €ì¥ ì‹œ ë¡œë”© ìƒíƒœë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ìƒíƒœ ì¶”ê°€
- handleSaveSettingsì—ì„œ loading ìƒíƒœ ê´€ë¦¬ ì¶”ê°€

# 3. ìµœê·¼ ì§€í‘œ ë¯¸ë¦¬ë³´ê¸°
feat: ì¶”ì  ì¹´ë“œì— ìµœê·¼ ì§€í‘œ ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€
- ì¹´ë“œ ìƒë‹¨ì— ìµœê·¼ ìˆœìœ„, ë°©ë¬¸ìë¦¬ë·°, ë¸”ë¡œê·¸ë¦¬ë·° í‘œì‹œ
- ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ
- ìˆœìœ„ ë³€ë™ì„ í™”ì‚´í‘œì™€ ìƒ‰ìƒìœ¼ë¡œ í‘œì‹œ
- "ì§€ê¸ˆ ìˆ˜ì§‘" í›„ ìë™ìœ¼ë¡œ ìµœê·¼ ì§€í‘œ ê°±ì‹ 
- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ (3ì—´)

# 4. ì „ì¼ ëŒ€ë¹„ ë³€ë™ê°’
feat: ì§€í‘œ ì¹´ë“œì— ì „ì¼ ëŒ€ë¹„ ë³€ë™ê°’ ì¶”ê°€
- ìˆœìœ„, ë°©ë¬¸ìë¦¬ë·°, ë¸”ë¡œê·¸ë¦¬ë·°ì˜ ì „ì¼ ëŒ€ë¹„ ë³€ë™ê°’ í‘œì‹œ
- ì¦ê°€ëŠ” ë¹¨ê°„ìƒ‰ â†‘, ê°ì†ŒëŠ” íŒŒë€ìƒ‰ â†“ë¡œ í‘œì‹œ
- ìˆœìœ„ëŠ” ì˜¬ë¼ê°€ë©´ íŒŒë€ìƒ‰ â†‘, ë‚´ë ¤ê°€ë©´ ë¹¨ê°„ìƒ‰ â†“
- ìµœê·¼ 2ê°œì˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë¹„êµí•˜ì—¬ ë³€ë™ê°’ ê³„ì‚°

fix: ì „ì¼ ë°ì´í„° ì—†ì„ ë•Œë„ ìµœê·¼ ì§€í‘œ í‘œì‹œ
- ìµœê·¼ ë°ì´í„°ë§Œ ìˆì„ ë•Œ "ì‹ ê·œ"ë¡œ í‘œì‹œ
- ì „ì¼ ë°ì´í„° ìˆê³  ë³€ë™ ì—†ì„ ë•Œ "-"ë¡œ í‘œì‹œ
- ì „ì¼ ë°ì´í„° ìˆê³  ë³€ë™ ìˆì„ ë•Œ í™”ì‚´í‘œì™€ ìˆ«ì í‘œì‹œ

# 5. ë””ë²„ê¹… ë° ë¬¸ì œ í•´ê²°
debug: ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ë§¤ì¥ ì¡°íšŒ ë¬¸ì œ ë””ë²„ê¹…
- ë°±ì—”ë“œ stores APIì— user_id ë¡œê¹… ì¶”ê°€
- ì†Œì…œ ë¡œê·¸ì¸ ì‹œ user_id ë¡œê¹… ì¶”ê°€
- í”„ë¡ íŠ¸ì—”ë“œ useStoresì— user ë° API ì‘ë‹µ ë¡œê¹… ì¶”ê°€

fix: ë°±ì—”ë“œ ì¬ì‹œì‘ìœ¼ë¡œ ì†Œì…œ ë¡œê·¸ì¸ ë§¤ì¥ ì—°ê²° ë¬¸ì œ í•´ê²°
- Docker ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œ ë° ì¬ì‹œì‘
- ë””ë²„ê¹… ë¡œê·¸ ìœ ì§€ (í–¥í›„ ë¬¸ì œ ë°œìƒ ì‹œ í™œìš©)
```

#### ë°°í¬ í”„ë¡œì„¸ìŠ¤
1. **í”„ë¡ íŠ¸ì—”ë“œ:** GitHub Desktop â†’ Vercel ìë™ ë°°í¬
2. **ë°±ì—”ë“œ:** SSH â†’ Docker ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œ
3. **í…ŒìŠ¤íŠ¸:** 
   - âœ… ì´ë©”ì¼ ê³„ì • ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
   - âœ… ì†Œì…œ ë¡œê·¸ì¸ (ì¹´ì¹´ì˜¤/ë„¤ì´ë²„) í…ŒìŠ¤íŠ¸
   - âœ… ë§¤ì¥ ëª©ë¡ í‘œì‹œ í™•ì¸
   - âœ… ì£¼ìš”ì§€í‘œ ì¶”ì  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
   - âœ… ëª¨ë‹¬ UI ë™ì‘ í™•ì¸
   - âœ… ìµœê·¼ ì§€í‘œ ë¯¸ë¦¬ë³´ê¸° í™•ì¸
   - âœ… ë³€ë™ê°’ ê³„ì‚° í™•ì¸

---

### ğŸ“Š ì„±ê³¼ ë° ê°œì„  íš¨ê³¼

#### UI/UX ê°œì„ 
- **ìŠ¤í¬ë¡¤ ì œê±°:** ëª¨ë‹¬ë¡œ ì¸í•´ í˜ì´ì§€ ìŠ¤í¬ë¡¤ ë¶ˆí•„ìš”
- **ì •ë³´ ë°€ë„ í–¥ìƒ:** ì¹´ë“œì— ìµœê·¼ ì§€í‘œ ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€ë¡œ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥
- **ì‹œê°ì  ê°œì„ :** ê·¸ë¼ë””ì–¸íŠ¸, ì•„ì´ì½˜, ìƒ‰ìƒìœ¼ë¡œ ê°€ë…ì„± ëŒ€í­ í–¥ìƒ
- **ë°˜ì‘í˜•:** ëª¨ë°”ì¼/íƒœë¸”ë¦¿/PC ëª¨ë“  ë””ë°”ì´ìŠ¤ ìµœì í™”

#### ì‚¬ìš©ì ê²½í—˜
- **ì¦‰ì‹œì„±:** ì¹´ë“œë§Œ ë´ë„ ìµœê·¼ ìƒíƒœ íŒŒì•… ê°€ëŠ¥
- **í¸ì˜ì„±:** ëª¨ë‹¬ë¡œ ì¸í•´ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ìƒì„¸ ì •ë³´ í™•ì¸
- **ì§ê´€ì„±:** ìƒ‰ìƒê³¼ í™”ì‚´í‘œë¡œ ë³€ë™ ë°©í–¥ ì¦‰ì‹œ ì´í•´ ê°€ëŠ¥

#### ê¸°ìˆ ì  ê°œì„ 
- **ë””ë²„ê¹… ë¡œê·¸:** í–¥í›„ ë¬¸ì œ ë°œìƒ ì‹œ ë¹ ë¥¸ ì›ì¸ íŒŒì•… ê°€ëŠ¥
- **ëª¨ë“ˆí™”:** Dialog ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© ê°€ëŠ¥
- **ìµœì í™”:** ìµœê·¼ 2ê°œ ë°ì´í„°ë§Œ ë¡œë“œí•˜ì—¬ ì„±ëŠ¥ í–¥ìƒ

---

### ğŸ¯ ë‚¨ì€ ì‘ì—… ë° ê°œì„  ì‚¬í•­

#### 1. ì•Œë¦¼ ê¸°ëŠ¥ êµ¬í˜„
- [ ] ì¹´ì¹´ì˜¤í†¡ ë¹„ì¦ˆë©”ì‹œì§€ API ì—°ë™
- [ ] SMS API ì—°ë™ (NCP SENS ë˜ëŠ” Twilio)
- [ ] SMTP ì„¤ì • (ì´ë©”ì¼ ì•Œë¦¼)

#### 2. ìŠ¤ì¼€ì¤„ëŸ¬ ìµœì í™”
- [ ] ë§¤ ì‹œê°„ ì •ê°ì— next_collection_at í™•ì¸
- [ ] ë°°ì¹˜ ì²˜ë¦¬ë¡œ ì—¬ëŸ¬ tracker ë™ì‹œ ìˆ˜ì§‘
- [ ] ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ë¡œì§ ì¶”ê°€

#### 3. ì„±ëŠ¥ ê°œì„ 
- [ ] ìµœê·¼ ì§€í‘œ ì¡°íšŒ APIì— limit íŒŒë¼ë¯¸í„° ì¶”ê°€
- [ ] ìºì‹± ì „ëµ ë„ì… (Redis)
- [ ] ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜

#### 4. ì¶”ê°€ ê¸°ëŠ¥
- [ ] ì§€í‘œ ë‚´ë³´ë‚´ê¸° (CSV, Excel)
- [ ] ì»¤ìŠ¤í…€ ì•Œë¦¼ ì¡°ê±´ ì„¤ì •
- [ ] ë‹¤ì¤‘ ë§¤ì¥ ë¹„êµ ëŒ€ì‹œë³´ë“œ

---

### ğŸ“ êµí›ˆ ë° ë…¸í•˜ìš°

#### 1. Docker ì»¨í…Œì´ë„ˆ ê´€ë¦¬
**êµí›ˆ:** ì½”ë“œ ë³€ê²½ í›„ ë°˜ë“œì‹œ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ í™•ì¸
```bash
# ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œë§ˆë‹¤
docker-compose down
docker-compose up -d --build
```

#### 2. ë””ë²„ê¹… ì „ëµ
**íš¨ê³¼ì ì¸ ë°©ë²•:**
1. í”„ë¡ íŠ¸ì—”ë“œ â†’ ë°±ì—”ë“œ â†’ ë°ì´í„°ë² ì´ìŠ¤ ìˆœìœ¼ë¡œ ë¡œê·¸ ì¶”ê°€
2. Sequential Thinkingìœ¼ë¡œ ì²´ê³„ì  ë¶„ì„
3. ê° ë ˆì´ì–´ì˜ ì…ì¶œë ¥ ë°ì´í„° í™•ì¸

#### 3. UI/UX ê°œì„  í”„ë¡œì„¸ìŠ¤
**ë‹¨ê³„ì  ì ‘ê·¼:**
1. ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ("ìŠ¤í¬ë¡¤ì´ ë¶ˆí¸í•¨")
2. í•´ê²°ì±… ì œì•ˆ (ëª¨ë‹¬ ë„ì…)
3. ì¶”ê°€ ê°œì„  ìš”ì²­ ("ë¹ˆ ê³µê°„ í™œìš©")
4. ì ì§„ì  ê°œì„  (ë¯¸ë¦¬ë³´ê¸° â†’ ë³€ë™ê°’)

#### 4. ë°˜ì‘í˜• ë””ìì¸ íŒ
```typescript
// ëª¨ë°”ì¼ ìš°ì„  + ì ì§„ì  í™•ì¥
<div className="grid grid-cols-3 gap-2">           {/* ëª¨ë°”ì¼: 3ì—´ */}
<div className="md:grid-cols-1">                  {/* íƒœë¸”ë¦¿: 1ì—´ */}
<div className="lg:grid-cols-2">                  {/* PC: 2ì—´ */}
```

---

### ğŸ† ìµœì¢… ê²°ê³¼

**êµ¬í˜„ ì™„ë£Œ:**
- âœ… ì£¼ìš”ì§€í‘œ ì¶”ì  ê¸°ëŠ¥ 100% ì™„ì„±
- âœ… ëª¨ë‹¬ UIë¡œ ì‚¬ìš©ì„± ëŒ€í­ ê°œì„ 
- âœ… ìµœê·¼ ì§€í‘œ ë¯¸ë¦¬ë³´ê¸°ë¡œ ì •ë³´ ë°€ë„ í–¥ìƒ
- âœ… ë¦¬ë·° ë³€ë™ê°’ìœ¼ë¡œ íŠ¸ë Œë“œ íŒŒì•… ê°€ëŠ¥
- âœ… ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ì ë§¤ì¥ ì—°ê²° ë¬¸ì œ í•´ê²°
- âœ… ë””ë²„ê¹… ë¡œê·¸ë¡œ í–¥í›„ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:**
- âœ… ì´ë©”ì¼ ë¡œê·¸ì¸
- âœ… ì†Œì…œ ë¡œê·¸ì¸ (ì¹´ì¹´ì˜¤/ë„¤ì´ë²„)
- âœ… ë§¤ì¥ ëª©ë¡ ì¡°íšŒ
- âœ… ì¶”ì  ì„¤ì • ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- âœ… ì§€ê¸ˆ ìˆ˜ì§‘ ê¸°ëŠ¥
- âœ… ì§€í‘œ ë³´ê¸° (ì°¨íŠ¸/í…Œì´ë¸”)
- âœ… ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼/íƒœë¸”ë¦¿/PC)

**ë°°í¬ ì™„ë£Œ:**
- âœ… í”„ë¡ íŠ¸ì—”ë“œ: Vercel
- âœ… ë°±ì—”ë“œ: AWS EC2 (Docker)
- âœ… í”„ë¡œë•ì…˜ í™˜ê²½ ì•ˆì • ì‘ë™

---

**ì‘ì„±ì¼:** 2026-01-21  
**ì‘ì—… ì‹œê°„:** ì•½ 3ì‹œê°„  
**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:** âœ…  
**í”„ë¡œë•ì…˜ ë°°í¬:** âœ…  
**ì‚¬ìš©ì ë§Œì¡±ë„:** â­â­â­â­â­ (UI/UX ëŒ€í­ ê°œì„ )

=====================================

## ì„¸ì…˜ 19: ì†Œì…œ ë¡œê·¸ì¸ RLS ë¬¸ì œ ì™„ì „ í•´ê²° ë° ëŒ€ì‹œë³´ë“œ UI ì „ë©´ ê°œí¸
=====================================

**ì‘ì—… ê¸°ê°„:** 2026-01-22  
**ì£¼ìš” ëª©í‘œ:** ì†Œì…œ ë¡œê·¸ì¸ ì¬ë¡œê·¸ì¸ ì‹œ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨ ë¬¸ì œ ì™„ì „ í•´ê²° ë° ëŒ€ì‹œë³´ë“œ UX ì „ë©´ ê°œì„ 

---

### ğŸ” 1. ì†Œì…œ ë¡œê·¸ì¸ RLS ë¬¸ì œ ì™„ì „ í•´ê²°

#### 1.1 ë¬¸ì œ ìƒí™©
**ì¦ìƒ:**
- ìµœì´ˆ ì†Œì…œ ë¡œê·¸ì¸: ì„±ê³µ âœ…
- ë¡œê·¸ì•„ì›ƒ í›„ ì¬ë¡œê·¸ì¸: ë§¤ì¥ ë° ì¶”ì í‚¤ì›Œë“œ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨ âŒ
- ì´ë©”ì¼ ë¡œê·¸ì¸: ëª¨ë“  ê²½ìš° ì •ìƒ ì‘ë™ âœ…

**Sequential Thinking ë¶„ì„:**
1. **ê°€ì„¤:** RLS ì •ì±…ì´ `auth.uid()`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™
2. **ë¬¸ì œ:** ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ìëŠ” `profiles.id` â‰  `auth.users.id` ë¶ˆì¼ì¹˜
3. **ì›ì¸:** ê¸°ì¡´ ì½”ë“œê°€ ì»¤ìŠ¤í…€ JWTë¥¼ ìƒì„±í•˜ì—¬ Supabase Authì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ
4. **í•´ê²° ë°©í–¥:** Supabase native authë¥¼ ì‚¬ìš©í•˜ê³  `profiles.id`ë¥¼ `auth.users.id`ì™€ ì¼ì¹˜ì‹œì¼œì•¼ í•¨

#### 1.2 RLS Bypass í•¨ìˆ˜ ìƒì„±

**ë¬¸ì œ:** `get_current_user` í•¨ìˆ˜ì—ì„œ JWT ê²€ì¦ í›„ `profiles` ì¡°íšŒ ì‹œ RLS ì •ì±…ì— ë§‰í˜

**í•´ê²°:** RLSë¥¼ ìš°íšŒí•˜ëŠ” PostgreSQL í•¨ìˆ˜ ìƒì„±

```sql
-- supabase/migrations/020_add_bypass_rls_functions.sql
CREATE OR REPLACE FUNCTION get_profile_by_id_bypass_rls(p_user_id UUID)
RETURNS TABLE (
  id UUID,
  email TEXT,
  display_name TEXT,
  phone_number TEXT,
  profile_image_url TEXT,
  auth_provider TEXT,
  subscription_tier TEXT,
  total_credits INT,
  onboarding_completed BOOLEAN,
  user_position TEXT,
  marketing_experience TEXT,
  agency_experience TEXT,
  created_at TIMESTAMPTZ,
  last_login_at TIMESTAMPTZ
)
SECURITY DEFINER
SET search_path = public
LANGUAGE plpgsql
AS $$
BEGIN
  RETURN QUERY
  SELECT
    profiles.id,
    profiles.email,
    profiles.display_name,
    profiles.phone_number,
    profiles.profile_image_url,
    profiles.auth_provider,
    profiles.subscription_tier,
    profiles.total_credits,
    profiles.onboarding_completed,
    profiles.user_position,
    profiles.marketing_experience,
    profiles.agency_experience,
    profiles.created_at,
    profiles.last_login_at
  FROM profiles
  WHERE profiles.id = p_user_id;
END;
$$;

-- service_roleì—ë§Œ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ (ë³´ì•ˆ)
GRANT EXECUTE ON FUNCTION get_profile_by_id_bypass_rls TO service_role;
REVOKE EXECUTE ON FUNCTION get_profile_by_id_bypass_rls FROM anon, authenticated, public;
```

**ë³´ì•ˆ ê³ ë ¤ì‚¬í•­:**
- âœ… `SECURITY DEFINER`ë¡œ í•¨ìˆ˜ ì†Œìœ ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰
- âœ… `service_role`ì—ë§Œ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
- âœ… ë°±ì—”ë“œì—ì„œ JWT ê²€ì¦ í›„ì—ë§Œ í˜¸ì¶œ
- âœ… user_id íŒŒë¼ë¯¸í„°ëŠ” JWTì—ì„œ ì¶”ì¶œí•œ ê°’ë§Œ ì‚¬ìš©

#### 1.3 ì†Œì…œ ë¡œê·¸ì¸ ë¡œì§ ì™„ì „ ì¬êµ¬ì„±

**ê¸°ì¡´ ë¬¸ì œì :**
1. Admin API(`admin.create_user`) ì‚¬ìš© ì‹œ "User not allowed" ì—ëŸ¬
2. ì»¤ìŠ¤í…€ JWT ìƒì„±ìœ¼ë¡œ Supabase Authì™€ ë¶ˆì¼ì¹˜
3. `profiles.id`ì™€ `auth.users.id` ë¶ˆì¼ì¹˜ë¡œ RLS ì‹¤íŒ¨

**ìƒˆë¡œìš´ ì ‘ê·¼ ë°©ì‹:**
1. **Email-based Fixed Password ì „ëµ**
   - ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ìë„ ì¼ê´€ëœ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
   - `password = hashlib.sha256(f"{email}{SOCIAL_LOGIN_SALT}{provider}".encode()).hexdigest()`

2. **Supabase Native Auth ì‚¬ìš©**
   - `supabase.auth.sign_in_with_password()` ì‹œë„
   - ì‹¤íŒ¨ ì‹œ `supabase.auth.sign_up()` ì‹œë„
   - Admin API ì™„ì „ ì œê±°

3. **ID ë¶ˆì¼ì¹˜ ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜**
   - `profiles.id` â‰  `auth.users.id` ê°ì§€ ì‹œ ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜
   - `migrate_user_to_new_auth_id()` í•¨ìˆ˜ í˜¸ì¶œ

**êµ¬í˜„:**

```python
# backend/app/routers/auth.py

@router.post("/naver", response_model=AuthResponse)
async def naver_login(request: NaverAuthRequest):
    try:
        # 1. ë„¤ì´ë²„ í”„ë¡œí•„ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        naver_profile = get_naver_profile(request.access_token)
        email = naver_profile["email"]
        
        # 2. Email-based fixed password ìƒì„±
        password = hashlib.sha256(
            f"{email}{SOCIAL_LOGIN_SALT}naver".encode()
        ).hexdigest()
        
        # 3. ê¸°ì¡´ í”„ë¡œí•„ í™•ì¸
        existing_profile = supabase.rpc(
            "get_profile_by_email_bypass_rls",
            {"p_email": email}
        ).execute()
        
        # 4. Supabase Auth ë¡œê·¸ì¸ ì‹œë„
        try:
            auth_response = supabase.auth.sign_in_with_password({
                "email": email,
                "password": password
            })
            access_token = auth_response.session.access_token
            auth_user_id = auth_response.user.id
            
        except Exception as e:
            # 4-1. ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ íšŒì›ê°€ì…
            if "Invalid login credentials" in str(e):
                auth_response = supabase.auth.sign_up({
                    "email": email,
                    "password": password,
                    "options": {
                        "data": {
                            "display_name": naver_profile.get("name"),
                            "auth_provider": "naver"
                        }
                    }
                })
                access_token = auth_response.session.access_token
                auth_user_id = auth_response.user.id
            else:
                raise e
        
        # 5. profiles ë ˆì½”ë“œ ì²˜ë¦¬
        if existing_profile.data:
            # 5-1. ê¸°ì¡´ í”„ë¡œí•„ ì¡´ì¬ ì‹œ
            profile_data = existing_profile.data[0]
            profile_id = profile_data["id"]
            
            # 5-2. ID ë¶ˆì¼ì¹˜ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜
            if profile_id != auth_user_id:
                supabase.rpc("migrate_user_to_new_auth_id", {
                    "p_old_id": profile_id,
                    "p_new_id": auth_user_id,
                    "p_email": email,
                    "p_display_name": naver_profile.get("name"),
                    "p_phone_number": naver_profile.get("mobile"),
                    "p_profile_image_url": naver_profile.get("profile_image"),
                    "p_auth_provider": "naver",
                    "p_onboarding_completed": profile_data.get("onboarding_completed"),
                    "p_subscription_tier": profile_data.get("subscription_tier"),
                    "p_user_position": profile_data.get("user_position"),
                    "p_marketing_experience": profile_data.get("marketing_experience"),
                    "p_agency_experience": profile_data.get("agency_experience")
                }).execute()
                
                user_id = auth_user_id
            else:
                # 5-3. ID ì¼ì¹˜ ì‹œ í”„ë¡œí•„ ì—…ë°ì´íŠ¸ë§Œ
                user_id = profile_id
        else:
            # 5-4. ì‹ ê·œ ì‚¬ìš©ì ì‹œ í”„ë¡œí•„ ìƒì„±
            supabase.rpc("insert_profile_bypass_rls", {
                "p_user_id": auth_user_id,
                "p_email": email,
                "p_display_name": naver_profile.get("name"),
                "p_phone_number": naver_profile.get("mobile"),
                "p_profile_image_url": naver_profile.get("profile_image"),
                "p_auth_provider": "naver"
            }).execute()
            
            user_id = auth_user_id
        
        # 6. ì‘ë‹µ ë°˜í™˜
        return AuthResponse(
            access_token=access_token,
            user=UserProfile(
                id=user_id,
                email=email,
                display_name=naver_profile.get("name"),
                ...
            )
        )
        
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

**ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ë„ ë™ì¼í•œ ë¡œì§ ì ìš©**

#### 1.4 ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ í•¨ìˆ˜ ìƒì„± ë° ìˆ˜ì • (4ì°¨ë¡€)

**1ì°¨: ê¸°ë³¸ ë§ˆì´ê·¸ë ˆì´ì…˜ í•¨ìˆ˜ ìƒì„±**

```sql
-- supabase/migrations/022_migrate_user_to_new_auth_id.sql
CREATE OR REPLACE FUNCTION migrate_user_to_new_auth_id(
  p_old_id UUID,
  p_new_id UUID,
  p_email TEXT,
  p_display_name TEXT,
  p_phone_number TEXT,
  p_profile_image_url TEXT,
  p_auth_provider TEXT,
  p_onboarding_completed BOOLEAN,
  p_subscription_tier TEXT,
  p_user_position TEXT,
  p_marketing_experience TEXT,
  p_agency_experience TEXT
)
RETURNS VOID
SECURITY DEFINER
SET search_path = public
LANGUAGE plpgsql
AS $$
BEGIN
  -- 1. stores í…Œì´ë¸”ì˜ user_id ì—…ë°ì´íŠ¸
  UPDATE stores SET user_id = p_new_id WHERE user_id = p_old_id;
  
  -- 2. metric_trackers í…Œì´ë¸”ì˜ user_id ì—…ë°ì´íŠ¸
  UPDATE metric_trackers SET user_id = p_new_id WHERE user_id = p_old_id;
  
  -- 3. ê¸°ì¡´ profiles ë ˆì½”ë“œ ì‚­ì œ
  DELETE FROM profiles WHERE id = p_old_id;
  
  -- 4. ìƒˆë¡œìš´ profiles ë ˆì½”ë“œ ìƒì„±
  INSERT INTO profiles (
    id, email, display_name, phone_number, profile_image_url,
    auth_provider, onboarding_completed, subscription_tier,
    user_position, marketing_experience, agency_experience,
    total_credits, created_at, last_login_at
  )
  SELECT 
    p_new_id, p_email, p_display_name, p_phone_number, p_profile_image_url,
    p_auth_provider, p_onboarding_completed, p_subscription_tier,
    p_user_position, p_marketing_experience, p_agency_experience,
    total_credits, created_at, NOW()
  FROM profiles WHERE id = p_old_id;
END;
$$;
```

**ë¬¸ì œ 1:** `ambiguous column "total_credits"` ì—ëŸ¬

**2ì°¨: Ambiguous Column ë¬¸ì œ ìˆ˜ì •**

```sql
-- supabase/migrations/023_fix_migrate_function_ambiguous_column.sql
-- SELECT ì ˆì—ì„œ í…Œì´ë¸”ëª… ëª…ì‹œ
SELECT 
  p_new_id, p_email, p_display_name, ...,
  profiles.total_credits,    -- ëª…ì‹œì ìœ¼ë¡œ í…Œì´ë¸”ëª… ì§€ì •
  profiles.created_at,
  NOW()
FROM profiles WHERE profiles.id = p_old_id;
```

**ë¬¸ì œ 2:** `violates foreign key constraint "stores_user_id_fkey"` ì—ëŸ¬  
â†’ `stores.user_id`ë¥¼ `p_new_id`ë¡œ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ”ë°, ì•„ì§ `profiles`ì— `p_new_id`ê°€ ì—†ìŒ

**3ì°¨: ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆœì„œ ìˆ˜ì •**

```sql
-- supabase/migrations/024_fix_migration_order.sql
BEGIN
  -- 1. ë¨¼ì € ìƒˆë¡œìš´ profiles ë ˆì½”ë“œ ìƒì„± (total_credits ë³µì‚¬)
  INSERT INTO profiles (id, email, ..., total_credits, ...)
  SELECT p_new_id, p_email, ..., old_profile.total_credits, ...
  FROM (SELECT * FROM profiles WHERE id = p_old_id) AS old_profile;
  
  -- 2. ì´ì œ stores ì—…ë°ì´íŠ¸ (FK ì œì•½ì¡°ê±´ ë§Œì¡±)
  UPDATE stores SET user_id = p_new_id WHERE user_id = p_old_id;
  
  -- 3. metric_trackers ì—…ë°ì´íŠ¸
  UPDATE metric_trackers SET user_id = p_new_id WHERE user_id = p_old_id;
  
  -- 4. ë§ˆì§€ë§‰ìœ¼ë¡œ ê¸°ì¡´ profiles ë ˆì½”ë“œ ì‚­ì œ
  DELETE FROM profiles WHERE id = p_old_id;
END;
```

**ë¬¸ì œ 3:** `permission denied for function migrate_user_to_new_auth_id` ì—ëŸ¬

**4ì°¨: ê¶Œí•œ ë¬¸ì œ ìˆ˜ì •**

```sql
-- supabase/migrations/025_fix_migration_permissions.sql
-- service_roleê³¼ authenticated ëª¨ë‘ì—ê²Œ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
GRANT EXECUTE ON FUNCTION migrate_user_to_new_auth_id TO service_role;
GRANT EXECUTE ON FUNCTION migrate_user_to_new_auth_id TO authenticated;
REVOKE EXECUTE ON FUNCTION migrate_user_to_new_auth_id FROM anon, public;
```

**ë¬¸ì œ 4:** `duplicate key value violates unique constraint "profiles_email_key"` ì—ëŸ¬  
â†’ ê¸°ì¡´ `profiles`ì— ê°™ì€ ì´ë©”ì¼ì´ ìˆëŠ” ìƒíƒœì—ì„œ ìƒˆ `profiles` ìƒì„± ì‹œë„

**5ì°¨: Email Unique Constraint ë¬¸ì œ ìˆ˜ì •**

```sql
-- supabase/migrations/026_fix_email_unique_constraint.sql
BEGIN
  -- 1. ê¸°ì¡´ profilesì˜ emailì„ ì„ì‹œë¡œ ë³€ê²½
  UPDATE profiles 
  SET email = CONCAT(email, '_OLD_', gen_random_uuid())
  WHERE id = p_old_id;
  
  -- 2. ìƒˆë¡œìš´ profiles ë ˆì½”ë“œ ìƒì„± (ì´ì œ email ì¶©ëŒ ì—†ìŒ)
  INSERT INTO profiles (id, email, ..., total_credits, ...)
  SELECT p_new_id, p_email, ..., old_profile.total_credits, ...
  FROM (
    SELECT * FROM profiles 
    WHERE email LIKE CONCAT('%', p_email, '_OLD_%')
    LIMIT 1
  ) AS old_profile;
  
  -- 3. stores ë° metric_trackers ì—…ë°ì´íŠ¸
  UPDATE stores SET user_id = p_new_id WHERE user_id = p_old_id;
  UPDATE metric_trackers SET user_id = p_new_id WHERE user_id = p_old_id;
  
  -- 4. ê¸°ì¡´ profiles ì‚­ì œ (ì„ì‹œ emailê³¼ í•¨ê»˜)
  DELETE FROM profiles WHERE id = p_old_id;
END;
```

**ìµœì¢… ê²°ê³¼:**
- âœ… ì†Œì…œ ë¡œê·¸ì¸ ì¬ë¡œê·¸ì¸ ì‹œ ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜
- âœ… `profiles.id` = `auth.users.id` ì¼ì¹˜ ë³´ì¥
- âœ… ëª¨ë“  ê´€ë ¨ ë°ì´í„° (stores, metric_trackers) ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜
- âœ… RLS ì •ì±… ì •ìƒ ì‘ë™
- âœ… ê¸°ì¡´ ë°ì´í„° ë³´ì¡´ (total_credits, onboarding ìƒíƒœ ë“±)

---

### ğŸ¨ 2. ëŒ€ì‹œë³´ë“œ UI ì „ë©´ ê°œí¸

#### 2.1 ì¶”ì í‚¤ì›Œë“œ ì¹´ë“œ ê°œì„ 

**ìš”êµ¬ì‚¬í•­:**
1. ìˆœìœ„, ë°©ë¬¸ìë¦¬ë·°, ë¸”ë¡œê·¸ë¦¬ë·°ë¥¼ ëª…í™•í•˜ê²Œ í‘œì‹œ
2. ë³€ë™ê°’ í‘œì‹œ (ìƒ‰ìƒ + í™”ì‚´í‘œ)
3. ì¹´ë“œ width ê°ì†Œ
4. ê°™ì€ ë§¤ì¥ì˜ í‚¤ì›Œë“œëŠ” ê°™ì€ ìƒ‰ê¹”ë¡œ í‘œì‹œ

**êµ¬í˜„:**

```typescript
// frontend/app/dashboard/page.tsx

// ë§¤ì¥ë³„ ìƒ‰ìƒ ë§¤í•‘
const STORE_COLORS = [
  "bg-blue-50 border-blue-200",
  "bg-green-50 border-green-200",
  "bg-purple-50 border-purple-200",
  "bg-amber-50 border-amber-200",
  "bg-rose-50 border-rose-200",
  "bg-cyan-50 border-cyan-200"
];

const getStoreColorMap = (stores: Store[]) => {
  const colorMap: Record<string, string> = {};
  stores.forEach((store, index) => {
    colorMap[store.id] = STORE_COLORS[index % STORE_COLORS.length];
  });
  return colorMap;
};

// ì¶”ì í‚¤ì›Œë“œ ì¹´ë“œ ë Œë”ë§
{trackers.map((tracker) => {
  const storeColor = storeColorMap[tracker.store_id] || "bg-gray-50";
  
  return (
    <div key={tracker.id} className={`p-4 rounded-lg border-2 ${storeColor}`}>
      {/* ë§¤ì¥ëª… */}
      <div className="text-sm font-medium text-gray-600">
        {stores.find(s => s.id === tracker.store_id)?.name}
      </div>
      
      {/* í‚¤ì›Œë“œ */}
      <div className="text-lg font-bold">{tracker.keyword}</div>
      
      {/* ì§€í‘œ ê·¸ë¦¬ë“œ */}
      <div className="grid grid-cols-3 gap-2 mt-3">
        {/* ìˆœìœ„ */}
        <div className="bg-white/70 rounded-lg p-2">
          <div className="text-xs text-gray-600">ìˆœìœ„</div>
          <div className="text-2xl font-bold text-blue-600">
            {tracker.latest_rank || '-'}
          </div>
          {tracker.rank_change && (
            <div className={tracker.rank_change > 0 ? "text-red-500" : "text-green-500"}>
              {tracker.rank_change > 0 ? "â†“" : "â†‘"}{Math.abs(tracker.rank_change)}
            </div>
          )}
        </div>
        
        {/* ë°©ë¬¸ìë¦¬ë·° */}
        <div className="bg-white/70 rounded-lg p-2">
          <div className="text-xs text-gray-600">ë°©ë¬¸ì</div>
          <div className="text-lg font-bold">
            {tracker.visitor_review_count?.toLocaleString() || '-'}
          </div>
          {tracker.visitor_review_change && (
            <div className={tracker.visitor_review_change > 0 ? "text-blue-500" : "text-red-500"}>
              {tracker.visitor_review_change > 0 ? "â†‘" : "â†“"}
              {Math.abs(tracker.visitor_review_change)}
            </div>
          )}
        </div>
        
        {/* ë¸”ë¡œê·¸ë¦¬ë·° */}
        <div className="bg-white/70 rounded-lg p-2">
          <div className="text-xs text-gray-600">ë¸”ë¡œê·¸</div>
          <div className="text-lg font-bold">
            {tracker.blog_review_count?.toLocaleString() || '-'}
          </div>
          {tracker.blog_review_change && (
            <div className={tracker.blog_review_change > 0 ? "text-blue-500" : "text-red-500"}>
              {tracker.blog_review_change > 0 ? "â†‘" : "â†“"}
              {Math.abs(tracker.blog_review_change)}
            </div>
          )}
        </div>
      </div>
    </div>
  );
})}
```

**ì¹´ë“œ width ì¡°ì •:**
```typescript
// ê¸°ì¡´: ì „ì²´ ë„ˆë¹„
<div className="w-full">

// ë³€ê²½: ìµœëŒ€ ë„ˆë¹„ ì œí•œ + ê·¸ë¦¬ë“œ
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
```

#### 2.2 ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ ì¶”ê°€

**ìš”êµ¬ì‚¬í•­:** ì¶”ì í‚¤ì›Œë“œ ìˆœì„œë¥¼ ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ë³€ê²½

**ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ íƒ:** `@dnd-kit` (Reactìš© ìµœì‹  DnD ë¼ì´ë¸ŒëŸ¬ë¦¬)

**ì„¤ì¹˜:**
```bash
npm install @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities
```

**êµ¬í˜„:**

```typescript
// frontend/app/dashboard/page.tsx

import {
  DndContext,
  closestCenter,
  MouseSensor,
  TouchSensor,
  KeyboardSensor,
  useSensor,
  useSensors,
} from '@dnd-kit/core';
import {
  SortableContext,
  rectSortingStrategy,
  useSortable,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';

// ìˆœì„œ ë³€ê²½ ëª¨ë“œ ìƒíƒœ
const [isReordering, setIsReordering] = useState(false);

// DND ì„¼ì„œ ì„¤ì •
const sensors = useSensors(
  useSensor(MouseSensor, {
    activationConstraint: { distance: 10 }
  }),
  useSensor(TouchSensor, {
    activationConstraint: { delay: 250, tolerance: 5 }
  }),
  useSensor(KeyboardSensor)
);

// ë“œë˜ê·¸ ì¢…ë£Œ í•¸ë“¤ëŸ¬
const handleDragEnd = (event: any) => {
  const { active, over } = event;
  
  if (active.id !== over.id) {
    setTrackers((items) => {
      const oldIndex = items.findIndex((i) => i.id === active.id);
      const newIndex = items.findIndex((i) => i.id === over.id);
      
      const newItems = arrayMove(items, oldIndex, newIndex);
      
      // localStorageì— ìˆœì„œ ì €ì¥
      const order = newItems.map(item => item.id);
      localStorage.setItem('tracker_order', JSON.stringify(order));
      
      return newItems;
    });
  }
};

// Sortable ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
const SortableTrackerCard = ({ tracker }: { tracker: MetricTracker }) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
  } = useSortable({ id: tracker.id });
  
  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };
  
  return (
    <div ref={setNodeRef} style={style} {...attributes} {...listeners}>
      {/* ì¹´ë“œ ë‚´ìš© */}
    </div>
  );
};

// ë Œë”ë§
<div className="flex items-center gap-2 mb-4">
  <Link href="/dashboard/naver/metrics-tracker">
    <Button>+ ì¶”ì ê´€ë¦¬</Button>
  </Link>
  <Button 
    variant="outline" 
    onClick={() => setIsReordering(!isReordering)}
  >
    {isReordering ? "ì™„ë£Œ" : "ìˆœì„œë³€ê²½"}
  </Button>
</div>

{isReordering ? (
  <DndContext
    sensors={sensors}
    collisionDetection={closestCenter}
    onDragEnd={handleDragEnd}
  >
    <SortableContext items={trackers} strategy={rectSortingStrategy}>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {trackers.map((tracker) => (
          <SortableTrackerCard key={tracker.id} tracker={tracker} />
        ))}
      </div>
    </SortableContext>
  </DndContext>
) : (
  /* ì¼ë°˜ ì¹´ë“œ í‘œì‹œ */
)}
```

**ì£¼ìš” í¬ì¸íŠ¸:**
- âœ… `rectSortingStrategy`: ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒì— ìµœì í™”
- âœ… `MouseSensor`, `TouchSensor`, `KeyboardSensor`: ë‹¤ì–‘í•œ ì…ë ¥ ì§€ì›
- âœ… `activationConstraint`: ìš°ë°œì  ë“œë˜ê·¸ ë°©ì§€
- âœ… `localStorage`: ìˆœì„œ ì˜êµ¬ ì €ì¥
- âœ… "ìˆœì„œë³€ê²½" ë²„íŠ¼ìœ¼ë¡œ ëª¨ë“œ ì „í™˜

#### 2.3 ë§¤ì¥ë³„ ê·¸ë£¹í™” ë ˆì´ì•„ì›ƒ

**ìš”êµ¬ì‚¬í•­:**
1. ì¶”ì í‚¤ì›Œë“œë¥¼ ë§¤ì¥ë³„ë¡œ ê·¸ë£¹í™”
2. ê° ë§¤ì¥ë‹¹ ìµœëŒ€ 4ê°œ í‚¤ì›Œë“œ í‘œì‹œ
3. ë§¤ì¥ëª… + ì¸ë„¤ì¼ í‘œì‹œ
4. ë¸”ë¡œê·¸/ë°©ë¬¸ìë¦¬ë·°ëŠ” ë§¤ì¥ ë ˆë²¨ì— í•œ ë²ˆë§Œ í‘œì‹œ (í‚¤ì›Œë“œë³„ X)
5. ê°œë³„ í‚¤ì›Œë“œ "ìƒˆë¡œê³ ì¹¨" ë²„íŠ¼
6. ë§¤ì¥ ì „ì²´ "ìƒˆë¡œê³ ì¹¨" ë²„íŠ¼

**ë°ì´í„° êµ¬ì¡° ì¬ì„¤ê³„:**

```typescript
interface StoreTrackerGroup {
  store: Store;
  trackers: MetricTrackerWithDetails[];
}

// ë§¤ì¥ë³„ë¡œ ê·¸ë£¹í™”
const groupTrackersByStore = (
  trackers: MetricTrackerWithDetails[],
  stores: Store[]
): StoreTrackerGroup[] => {
  const groups: Record<string, MetricTrackerWithDetails[]> = {};
  
  trackers.forEach((tracker) => {
    if (!groups[tracker.store_id]) {
      groups[tracker.store_id] = [];
    }
    groups[tracker.store_id].push(tracker);
  });
  
  return stores
    .filter(store => groups[store.id]?.length > 0)
    .map(store => ({
      store,
      trackers: groups[store.id].slice(0, 4) // ìµœëŒ€ 4ê°œ
    }));
};
```

**ë§¤ì¥ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸:**

```typescript
const StoreTrackerCard = ({ group }: { group: StoreTrackerGroup }) => {
  const { store, trackers } = group;
  
  // ë§¤ì¥ ë ˆë²¨ ë¦¬ë·° ìˆ˜ (ì²« ë²ˆì§¸ tracker ê¸°ì¤€)
  const storeMetrics = trackers[0];
  
  return (
    <div className="bg-white rounded-xl shadow-sm border p-6">
      {/* ë§¤ì¥ í—¤ë” */}
      <div className="flex items-center gap-3 mb-4">
        {/* ë§¤ì¥ ì¸ë„¤ì¼ */}
        {store.thumbnail && (
          <img 
            src={store.thumbnail} 
            alt={store.name}
            className="w-12 h-12 rounded-lg object-cover"
          />
        )}
        
        {/* ë§¤ì¥ëª… */}
        <div className="flex-1">
          <h3 className="text-lg font-bold">{store.name}</h3>
        </div>
        
        {/* ì „ì²´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ */}
        <Button
          size="sm"
          variant="outline"
          onClick={() => handleCollectAllStoreMetrics(trackers)}
          title="ì´ ë§¤ì¥ì˜ ëª¨ë“  ì¶”ì í‚¤ì›Œë“œ ìˆœìœ„ë¥¼ ì§€ê¸ˆ ìˆ˜ì§‘í•©ë‹ˆë‹¤!"
        >
          <RefreshCw className="w-4 h-4" />
        </Button>
      </div>
      
      {/* ë§¤ì¥ ë ˆë²¨ ë¦¬ë·° ì§€í‘œ */}
      <div className="grid grid-cols-2 gap-3 mb-4 bg-gray-50 rounded-lg p-3">
        {/* ë°©ë¬¸ìë¦¬ë·° */}
        <div className="flex items-center gap-2">
          <Users className="w-4 h-4 text-blue-500" />
          <div>
            <div className="text-xs text-gray-600">ë°©ë¬¸ìë¦¬ë·°</div>
            <div className="text-lg font-bold">
              {storeMetrics.visitor_review_count?.toLocaleString() || '-'}
            </div>
            {storeMetrics.visitor_review_change !== 0 && (
              <div className={storeMetrics.visitor_review_change > 0 ? "text-blue-500" : "text-red-500"}>
                {storeMetrics.visitor_review_change > 0 ? "â†‘" : "â†“"}
                {Math.abs(storeMetrics.visitor_review_change)}
              </div>
            )}
          </div>
        </div>
        
        {/* ë¸”ë¡œê·¸ë¦¬ë·° */}
        <div className="flex items-center gap-2">
          <FileText className="w-4 h-4 text-amber-500" />
          <div>
            <div className="text-xs text-gray-600">ë¸”ë¡œê·¸ë¦¬ë·°</div>
            <div className="text-lg font-bold">
              {storeMetrics.blog_review_count?.toLocaleString() || '-'}
            </div>
            {storeMetrics.blog_review_change !== 0 && (
              <div className={storeMetrics.blog_review_change > 0 ? "text-blue-500" : "text-red-500"}>
                {storeMetrics.blog_review_change > 0 ? "â†‘" : "â†“"}
                {Math.abs(storeMetrics.blog_review_change)}
              </div>
            )}
          </div>
        </div>
      </div>
      
      {/* í‚¤ì›Œë“œ ëª©ë¡ (ìµœëŒ€ 4ê°œ) */}
      <div className="space-y-2">
        {trackers.map((tracker) => (
          <div key={tracker.id} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
            <div className="flex-1">
              {/* í‚¤ì›Œë“œëª… */}
              <div className="font-medium">{tracker.keyword}</div>
              
              {/* ìˆœìœ„ */}
              <div className="flex items-center gap-2 mt-1">
                {/* Top 5 ë°°ì§€ */}
                {tracker.latest_rank && tracker.latest_rank <= 5 && (
                  <Sparkles className="w-4 h-4 text-yellow-500" />
                )}
                
                <span className="text-2xl font-bold text-blue-600">
                  {tracker.latest_rank || '-'}ìœ„
                </span>
                
                {/* ìˆœìœ„ ë³€ë™ */}
                {tracker.rank_change && tracker.rank_change !== 0 && (
                  <span className={tracker.rank_change > 0 ? "text-red-500" : "text-green-500"}>
                    {tracker.rank_change > 0 ? "â†“" : "â†‘"}{Math.abs(tracker.rank_change)}
                  </span>
                )}
              </div>
            </div>
            
            {/* ê°œë³„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ */}
            <Button
              size="sm"
              variant="ghost"
              onClick={() => handleCollectMetrics(tracker.id)}
            >
              <RefreshCw className="w-4 h-4" />
            </Button>
          </div>
        ))}
        
        {/* ë¹ˆ ìŠ¬ë¡¯ (4ê°œ ë¯¸ë§Œì¼ ë•Œ) */}
        {trackers.length < 4 && (
          Array.from({ length: 4 - trackers.length }).map((_, i) => (
            <Link key={i} href="/dashboard/naver/metrics-tracker">
              <div className="flex items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition cursor-pointer">
                <Plus className="w-4 h-4 mr-2" />
                <span className="text-sm text-gray-600">ì¶”ì í‚¤ì›Œë“œ ì¶”ê°€</span>
              </div>
            </Link>
          ))
        )}
      </div>
    </div>
  );
};
```

**ê³ ì • ë†’ì´ ì„¤ì • (4ê°œ í‚¤ì›Œë“œ ê¸°ì¤€):**

```typescript
<div className="h-[520px] flex flex-col">
  {/* í—¤ë”: ~80px */}
  {/* ë§¤ì¥ ë¦¬ë·°: ~100px */}
  {/* í‚¤ì›Œë“œ 4ê°œ: 4 * 80px = 320px */}
  {/* ì—¬ë°±: ~20px */}
</div>
```

#### 2.4 Backend API í™•ì¥

**ë¬¸ì œ:** ìˆœìœ„, ë¦¬ë·° ë³€ë™ê°’ì„ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê³„ì‚°í•˜ë©´ ë¹„íš¨ìœ¨ì 

**í•´ê²°:** ë°±ì—”ë“œì—ì„œ ê³„ì‚°í•˜ì—¬ API ì‘ë‹µì— í¬í•¨

**ìŠ¤í‚¤ë§ˆ í™•ì¥:**

```python
# backend/app/models/schemas.py

class MetricTrackerWithDetails(MetricTrackerBase):
    id: UUID
    store_id: UUID
    user_id: UUID
    created_at: datetime
    updated_at: datetime
    
    # ì¶”ê°€ í•„ë“œ
    latest_rank: Optional[int] = None
    rank_change: Optional[int] = None
    visitor_review_count: Optional[int] = None
    blog_review_count: Optional[int] = None
    visitor_review_change: Optional[int] = None
    blog_review_change: Optional[int] = None
```

**Service ë©”ì„œë“œ ìˆ˜ì •:**

```python
# backend/app/services/metric_tracker_service.py

async def get_trackers_by_user(self, user_id: UUID):
    # 1. Trackers ì¡°íšŒ
    result = self.supabase.table("metric_trackers").select("*").eq(
        "user_id", str(user_id)
    ).order("created_at", desc=True).execute()
    
    trackers_data = result.data or []
    
    # 2. ê° trackerì˜ ìµœê·¼ 2ê°œ metrics ì¡°íšŒ
    for tracker in trackers_data:
        metrics_result = self.supabase.table("daily_metrics").select("*").eq(
            "tracker_id", tracker["id"]
        ).order("collection_date", desc=True).limit(2).execute()
        
        metrics = metrics_result.data or []
        
        if len(metrics) >= 1:
            latest = metrics[0]
            tracker["latest_rank"] = latest["rank"]
            tracker["visitor_review_count"] = latest["visitor_review_count"]
            tracker["blog_review_count"] = latest["blog_review_count"]
            
            if len(metrics) >= 2:
                previous = metrics[1]
                
                # ìˆœìœ„ ë³€ë™ (ìˆœìœ„ëŠ” ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)
                tracker["rank_change"] = latest["rank"] - previous["rank"]
                
                # ë¦¬ë·° ë³€ë™ (ë§ì„ìˆ˜ë¡ ì¢‹ìŒ)
                tracker["visitor_review_change"] = (
                    latest["visitor_review_count"] - previous["visitor_review_count"]
                )
                tracker["blog_review_change"] = (
                    latest["blog_review_count"] - previous["blog_review_count"]
                )
    
    return trackers_data
```

**API ì—”ë“œí¬ì¸íŠ¸:**

```python
# backend/app/routers/metric_tracker.py

@router.post("/trackers/{tracker_id}/collect", response_model=CollectMetricsResponse)
async def collect_metrics_now(
    tracker_id: UUID,
    current_user: dict = Depends(get_current_user)
):
    """ê°œë³„ trackerì˜ ì§€í‘œë¥¼ ì¦‰ì‹œ ìˆ˜ì§‘"""
    service = MetricTrackerService()
    result = await service.collect_tracker_metrics(tracker_id)
    return result
```

**í”„ë¡ íŠ¸ì—”ë“œ API í˜¸ì¶œ:**

```typescript
// frontend/lib/config.ts

export const api = {
  baseUrl: process.env.NEXT_PUBLIC_API_URL || 'https://api.whiplace.com',
  auth: { ... },
  stores: { ... },
  metrics: {
    list: (userId: string) => `${api.baseUrl}/api/v1/metrics/trackers?user_id=${userId}`,
    collect: (trackerId: string) => `${api.baseUrl}/api/v1/metrics/trackers/${trackerId}/collect`,
  }
};

// ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í•¸ë“¤ëŸ¬
const handleCollectMetrics = async (trackerId: string) => {
  try {
    setCollectingId(trackerId);
    
    const response = await fetch(api.metrics.collect(trackerId), {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    if (response.ok) {
      toast.success('ì§€í‘œë¥¼ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!');
      await loadDashboardData(); // ìƒˆë¡œê³ ì¹¨
    }
  } catch (error) {
    toast.error('ì§€í‘œ ìˆ˜ì§‘ ì‹¤íŒ¨');
  } finally {
    setCollectingId(null);
  }
};

// ë§¤ì¥ ì „ì²´ ìƒˆë¡œê³ ì¹¨
const handleCollectAllStoreMetrics = async (trackers: MetricTrackerWithDetails[]) => {
  try {
    await Promise.all(
      trackers.map(tracker => 
        fetch(api.metrics.collect(tracker.id), {
          method: 'POST',
          headers: { 'Authorization': `Bearer ${token}` }
        })
      )
    );
    
    toast.success('ëª¨ë“  í‚¤ì›Œë“œ ì§€í‘œë¥¼ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!');
    await loadDashboardData();
  } catch (error) {
    toast.error('ì¼ë¶€ ì§€í‘œ ìˆ˜ì§‘ ì‹¤íŒ¨');
  }
};
```

#### 2.5 ë“±ë¡ë§¤ì¥ ì¹´ë“œ ê°œì„ 

**ìš”êµ¬ì‚¬í•­:**
1. ë§¤ì¥ëª… í‘œì‹œ
2. ë§¤ì¥ ì¸ë„¤ì¼ ì¶”ê°€

**ë¬¸ì œ:** Backend APIëŠ” `name` í•„ë“œë¥¼ ë°˜í™˜í•˜ëŠ”ë° í”„ë¡ íŠ¸ì—”ë“œ ì¸í„°í˜ì´ìŠ¤ëŠ” `store_name` ì‚¬ìš©

**í•´ê²°:**

```typescript
// frontend/app/dashboard/page.tsx

interface Store {
  id: string;
  user_id: string;
  place_id: string;
  name: string;              // Backend API í•„ë“œ
  store_name?: string;       // ë ˆê±°ì‹œ í˜¸í™˜
  address: string;
  category: string;
  thumbnail?: string;        // ì¶”ê°€
  naver_place_url?: string;
  created_at: string;
}

// ë“±ë¡ë§¤ì¥ ì¹´ë“œ ë Œë”ë§
{stores.map((store) => (
  <Link key={store.id} href={`/dashboard/naver/${store.id}`}>
    <Card className="p-4 hover:shadow-md transition cursor-pointer">
      <div className="flex items-center gap-3">
        {/* ì¸ë„¤ì¼ */}
        {store.thumbnail && (
          <img 
            src={store.thumbnail} 
            alt={store.name || store.store_name}
            className="w-16 h-16 rounded-lg object-cover"
          />
        )}
        
        {/* ë§¤ì¥ ì •ë³´ */}
        <div className="flex-1">
          <h3 className="font-bold text-lg">
            {store.name || store.store_name}
          </h3>
          <p className="text-sm text-gray-600">{store.address}</p>
          <Badge variant="secondary">{store.category}</Badge>
        </div>
      </div>
    </Card>
  </Link>
))}
```

#### 2.6 Top 5 ìˆœìœ„ ë°°ì§€

**ìš”êµ¬ì‚¬í•­:** ìˆœìœ„ 1~5ìœ„ì— ë¶ˆê½ƒ ì•„ì´ì½˜ í‘œì‹œ

**êµ¬í˜„:**

```typescript
import { Sparkles } from 'lucide-react';

{tracker.latest_rank && tracker.latest_rank <= 5 && (
  <Sparkles className="w-5 h-5 text-yellow-500 animate-pulse" />
)}
```

#### 2.7 ì¶”ì í‚¤ì›Œë“œ ê°œìˆ˜ ì¡°ì • (5ê°œ â†’ 4ê°œ)

**ìš”êµ¬ì‚¬í•­:** ì¹´ë“œ ë†’ì´ë¥¼ ì¤„ì´ê¸° ìœ„í•´ 4ê°œë¡œ ë³€ê²½

**ë³€ê²½:**

```typescript
// ë§¤ì¥ë‹¹ ìµœëŒ€ 4ê°œ í‚¤ì›Œë“œ í‘œì‹œ
trackers: groups[store.id].slice(0, 4)

// ë¹ˆ ìŠ¬ë¡¯ë„ 4ê°œ ê¸°ì¤€
{trackers.length < 4 && (
  Array.from({ length: 4 - trackers.length }).map(...)
)}

// ì¹´ë“œ ë†’ì´ ì¡°ì •
<div className="h-[480px]"> {/* 520px â†’ 480px */}
```

---

### ğŸ“¦ 3. ë°°í¬ ë° í…ŒìŠ¤íŠ¸

#### 3.1 ì»¤ë°‹ ë‚´ì—­

```bash
# ì†Œì…œ ë¡œê·¸ì¸ ìˆ˜ì •ì‚¬í•­ (ì´ 10+ ì»¤ë°‹)
fix: RLS bypass í•¨ìˆ˜ ì¶”ê°€ (get_current_user ìˆ˜ì •)
fix: stores RLS bypass í•¨ìˆ˜ ì¶”ê°€
fix: Admin API ì œê±° ë° Supabase native auth ì‚¬ìš©
feat: ì†Œì…œ ë¡œê·¸ì¸ email-based fixed password ì „ëµ êµ¬í˜„
feat: migrate_user_to_new_auth_id í•¨ìˆ˜ ìƒì„±
fix: migrate í•¨ìˆ˜ ambiguous column ì—ëŸ¬ ìˆ˜ì •
fix: migrate í•¨ìˆ˜ ìˆœì„œ ë³€ê²½ (FK constraint í•´ê²°)
fix: migrate í•¨ìˆ˜ ê¶Œí•œ ë¬¸ì œ ìˆ˜ì •
fix: migrate í•¨ìˆ˜ email unique constraint í•´ê²°
test: ì†Œì…œ ë¡œê·¸ì¸ ì¬ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ í†µê³¼

# ëŒ€ì‹œë³´ë“œ UI ê°œì„ ì‚¬í•­ (ì´ 15+ ì»¤ë°‹)
feat: ì¶”ì í‚¤ì›Œë“œ ì¹´ë“œì— ìˆœìœ„/ë¦¬ë·° ì§€í‘œ í‘œì‹œ
feat: ë§¤ì¥ë³„ ìƒ‰ìƒ êµ¬ë¶„ ê¸°ëŠ¥ ì¶”ê°€
feat: DND-Kit ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ êµ¬í˜„
feat: ìˆœì„œë³€ê²½ ë²„íŠ¼ ë° ëª¨ë“œ ì „í™˜ ì¶”ê°€
feat: ë§¤ì¥ë³„ ê·¸ë£¹í™” ë ˆì´ì•„ì›ƒ êµ¬í˜„
feat: ë§¤ì¥ ì¸ë„¤ì¼ ë° ë§¤ì¥ëª… í‘œì‹œ
feat: ê°œë³„/ì „ì²´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ ì¶”ê°€
feat: Top 5 ìˆœìœ„ ë°°ì§€ (Sparkles) ì¶”ê°€
feat: ë¹ˆ ìŠ¬ë¡¯ì— "ì¶”ì í‚¤ì›Œë“œ ì¶”ê°€" ë²„íŠ¼
feat: Backend API í™•ì¥ (ë³€ë™ê°’ ê³„ì‚°)
feat: MetricTrackerWithDetails ìŠ¤í‚¤ë§ˆ í™•ì¥
feat: get_trackers_by_user ë©”ì„œë“œ ê°œì„ 
fix: Store ì¸í„°í˜ì´ìŠ¤ name/store_name í˜¸í™˜ì„±
fix: ì¹´ë“œ ë†’ì´ ì¡°ì • (4ê°œ í‚¤ì›Œë“œ ê¸°ì¤€)
style: ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ê°œì„ 
```

#### 3.2 ë°°í¬ í”„ë¡œì„¸ìŠ¤

**í”„ë¡ íŠ¸ì—”ë“œ:**
```bash
# ë¡œì»¬ì—ì„œ ë¹Œë“œ í…ŒìŠ¤íŠ¸
cd frontend
npm run build

# GitHub Desktopìœ¼ë¡œ ì»¤ë°‹ & í‘¸ì‹œ
# â†’ Vercel ìë™ ë°°í¬
```

**ë°±ì—”ë“œ:**
```bash
# EC2 ì ‘ì†
ssh ubuntu@api.whiplace.com

# ë°±ì—”ë“œ ì¬ë°°í¬
cd ~/egurado/backend
git pull origin main
docker-compose down
docker-compose up -d --build

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

**Supabase ë§ˆì´ê·¸ë ˆì´ì…˜:**
```sql
-- SQL Editorì—ì„œ ì§ì ‘ ì‹¤í–‰
-- 020, 021, 022, 023, 024, 025, 026 migrations
```

#### 3.3 í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì†Œì…œ ë¡œê·¸ì¸:**
- âœ… ë„¤ì´ë²„ ìµœì´ˆ ë¡œê·¸ì¸ â†’ ì„±ê³µ
- âœ… ë„¤ì´ë²„ ë¡œê·¸ì•„ì›ƒ â†’ ì¬ë¡œê·¸ì¸ â†’ ë§¤ì¥ ì •ìƒ í‘œì‹œ
- âœ… ì¹´ì¹´ì˜¤ ìµœì´ˆ ë¡œê·¸ì¸ â†’ ì„±ê³µ
- âœ… ì¹´ì¹´ì˜¤ ë¡œê·¸ì•„ì›ƒ â†’ ì¬ë¡œê·¸ì¸ â†’ ë§¤ì¥ ì •ìƒ í‘œì‹œ
- âœ… ì´ë©”ì¼ê³¼ ë™ì¼í•œ ì´ë©”ì¼ë¡œ ì†Œì…œ ë¡œê·¸ì¸ â†’ ìë™ ë¡œê·¸ì¸
- âœ… ê¸°ì¡´ í”„ë¡œí•„ ë°ì´í„° ë³´ì¡´ (total_credits, onboarding)
- âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ stores/metric_trackers ì •ìƒ ì—°ë™

**ëŒ€ì‹œë³´ë“œ UI:**
- âœ… ì¶”ì í‚¤ì›Œë“œ ì¹´ë“œì— ìˆœìœ„/ë¦¬ë·° ì§€í‘œ í‘œì‹œ
- âœ… ë³€ë™ê°’ ìƒ‰ìƒ í‘œì‹œ (ìˆœìœ„: ë¹¨ê°•â†“/ì´ˆë¡â†‘, ë¦¬ë·°: íŒŒë‘â†‘/ë¹¨ê°•â†“)
- âœ… ë§¤ì¥ë³„ ìƒ‰ìƒ êµ¬ë¶„
- âœ… ë“œë˜ê·¸ì•¤ë“œë¡­ ìˆœì„œ ë³€ê²½
- âœ… localStorage ìˆœì„œ ì˜êµ¬ ì €ì¥
- âœ… ë§¤ì¥ë³„ ê·¸ë£¹í™” ë ˆì´ì•„ì›ƒ
- âœ… ë§¤ì¥ ì¸ë„¤ì¼ í‘œì‹œ
- âœ… ê°œë³„ í‚¤ì›Œë“œ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼
- âœ… ë§¤ì¥ ì „ì²´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ (íˆ´íŒ í¬í•¨)
- âœ… Top 5 ìˆœìœ„ ë°°ì§€ (Sparkles)
- âœ… ë¹ˆ ìŠ¬ë¡¯ "ì¶”ì í‚¤ì›Œë“œ ì¶”ê°€" ë²„íŠ¼
- âœ… 4ê°œ í‚¤ì›Œë“œ í‘œì‹œ ë° ê³ ì • ë†’ì´
- âœ… ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼/íƒœë¸”ë¦¿/PC)

---

### ğŸ“Š 4. ì„±ê³¼ ë° êµí›ˆ

#### 4.1 ê¸°ìˆ ì  ì„±ê³¼

**ì†Œì…œ ë¡œê·¸ì¸ ë¬¸ì œ ì™„ì „ í•´ê²°:**
- âœ… RLS ìš°íšŒ ì—†ì´ ì •ìƒì ìœ¼ë¡œ RLS ì •ì±… ì‘ë™
- âœ… `profiles.id` = `auth.users.id` ì¼ì¹˜ ë³´ì¥
- âœ… ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ê¸°ì¡´ ë°ì´í„° ë³´ì¡´
- âœ… Email-based fixed passwordë¡œ ì¼ê´€ì„± ìœ ì§€
- âœ… Admin API ì œê±°ë¡œ "User not allowed" ì—ëŸ¬ í•´ê²°

**ëŒ€ì‹œë³´ë“œ UX ëŒ€í­ ê°œì„ :**
- âœ… ì •ë³´ ë°€ë„ í–¥ìƒ (í•œ í™”ë©´ì— ë” ë§ì€ ì •ë³´)
- âœ… ì‹œê°ì  êµ¬ì¡°í™” (ë§¤ì¥ë³„ ê·¸ë£¹, ìƒ‰ìƒ êµ¬ë¶„)
- âœ… ì¸í„°ë™ì…˜ ê°œì„  (ë“œë˜ê·¸ì•¤ë“œë¡­, ìƒˆë¡œê³ ì¹¨)
- âœ… ë°˜ì‘í˜• ë””ìì¸ìœ¼ë¡œ ëª¨ë“  ë””ë°”ì´ìŠ¤ ìµœì í™”

**ì½”ë“œ í’ˆì§ˆ í–¥ìƒ:**
- âœ… Backendì—ì„œ ê³„ì‚° ë¡œì§ ì²˜ë¦¬ (í”„ë¡ íŠ¸ì—”ë“œ ë¶€ë‹´ ê°ì†Œ)
- âœ… íƒ€ì… ì•ˆì •ì„± (Pydantic, TypeScript)
- âœ… ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ (SortableTrackerCard)

#### 4.2 êµí›ˆ

**1. RLSì™€ Supabase Auth ì´í•´ì˜ ì¤‘ìš”ì„±**
- SupabaseëŠ” `auth.uid()`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ RLSê°€ ì‘ë™
- ì»¤ìŠ¤í…€ JWTëŠ” RLSì™€ í˜¸í™˜ë˜ì§€ ì•ŠìŒ
- `profiles.id`ëŠ” ë°˜ë“œì‹œ `auth.users.id`ì™€ ì¼ì¹˜í•´ì•¼ í•¨

**2. ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ**
- ìˆœì„œê°€ ì¤‘ìš”: FK ì œì•½ì¡°ê±´ ê³ ë ¤
- Unique ì œì•½ì¡°ê±´ ì‚¬ì „ í•´ê²° (ì„ì‹œ email ë³€ê²½)
- Transactionìœ¼ë¡œ ì›ìì„± ë³´ì¥
- SECURITY DEFINERë¡œ ê¶Œí•œ ê´€ë¦¬

**3. Sequential Thinkingì˜ íš¨ê³¼**
- ë³µì¡í•œ ë¬¸ì œë¥¼ ë‹¨ê³„ì ìœ¼ë¡œ ë¶„ì„
- ê°€ì„¤ â†’ ê²€ì¦ â†’ ìˆ˜ì • ë°˜ë³µ
- ê·¼ë³¸ ì›ì¸ íŒŒì•… í›„ í•´ê²° (ì„ì‹œë°©í¸ X)

**4. UI/UX ê°œì„  í”„ë¡œì„¸ìŠ¤**
- ì‚¬ìš©ì í”¼ë“œë°±ì„ ë°”íƒ•ìœ¼ë¡œ ì ì§„ì  ê°œì„ 
- ì •ë³´ ê³„ì¸µ êµ¬ì¡° ëª…í™•íˆ (ë§¤ì¥ > í‚¤ì›Œë“œ > ì§€í‘œ)
- ìƒ‰ìƒê³¼ ì•„ì´ì½˜ìœ¼ë¡œ ì‹œê°ì  ì°¨ë³„í™”
- ë°˜ì‘í˜• ë””ìì¸ì€ í•„ìˆ˜

**5. DND-Kit ì‚¬ìš© ë…¸í•˜ìš°**
- `rectSortingStrategy`: ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- `activationConstraint`: ìš°ë°œì  ë“œë˜ê·¸ ë°©ì§€
- `MouseSensor` + `TouchSensor`: ë‹¤ì–‘í•œ ë””ë°”ì´ìŠ¤ ì§€ì›
- `localStorage`: ìˆœì„œ ì˜êµ¬ ì €ì¥

---

### ğŸ¯ 5. ë‚¨ì€ ì‘ì—…

#### 5.1 ê¸°ëŠ¥ ê°œì„ 
- [ ] ì¶”ì í‚¤ì›Œë“œ 5ê°œ ì´ìƒì¼ ë•Œ í˜ì´ì§€ë„¤ì´ì…˜
- [ ] ë§¤ì¥ ì¹´ë“œë„ ë“œë˜ê·¸ì•¤ë“œë¡­ ìˆœì„œ ë³€ê²½
- [ ] ì§€í‘œ ì°¨íŠ¸ ëª¨ë‹¬ (ì¶”ì„¸ ë¶„ì„)
- [ ] í‚¤ì›Œë“œ ê·¸ë£¹ ê´€ë¦¬ (íƒœê·¸ ê¸°ëŠ¥)

#### 5.2 ì„±ëŠ¥ ìµœì í™”
- [ ] API ì‘ë‹µ ìºì‹± (React Query)
- [ ] ì´ë¯¸ì§€ ìµœì í™” (Next.js Image)
- [ ] ë¬´í•œ ìŠ¤í¬ë¡¤ (ë§ì€ ë§¤ì¥/í‚¤ì›Œë“œ ì²˜ë¦¬)

#### 5.3 ì¶”ê°€ ê¸°ëŠ¥
- [ ] ì•Œë¦¼ ì„¤ì • (ìˆœìœ„ ë³€ë™ ì‹œ ì•Œë¦¼)
- [ ] ê²½ìŸì‚¬ í‚¤ì›Œë“œ ì¶”ì 
- [ ] CSV/Excel ë‚´ë³´ë‚´ê¸°
- [ ] ì£¼ê°„/ì›”ê°„ ë¦¬í¬íŠ¸ ìë™ ìƒì„±

---

### ğŸ† ìµœì¢… ê²°ê³¼

**êµ¬í˜„ ì™„ë£Œ:**
- âœ… ì†Œì…œ ë¡œê·¸ì¸ ì¬ë¡œê·¸ì¸ ë¬¸ì œ 100% í•´ê²°
- âœ… RLS ì •ì±… ì •ìƒ ì‘ë™
- âœ… ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ìë™í™”
- âœ… ëŒ€ì‹œë³´ë“œ UI ì „ë©´ ê°œí¸
- âœ… ë“œë˜ê·¸ì•¤ë“œë¡­ ìˆœì„œ ë³€ê²½
- âœ… ë§¤ì¥ë³„ ê·¸ë£¹í™” ë° ìƒ‰ìƒ êµ¬ë¶„
- âœ… ì‹¤ì‹œê°„ ì§€í‘œ ìƒˆë¡œê³ ì¹¨
- âœ… Top 5 ìˆœìœ„ ë°°ì§€
- âœ… ë°˜ì‘í˜• ë””ìì¸ ì™„ì„±

**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:**
- âœ… ì†Œì…œ ë¡œê·¸ì¸ (ë„¤ì´ë²„/ì¹´ì¹´ì˜¤) ì¬ë¡œê·¸ì¸ Ã—10íšŒ ì´ìƒ
- âœ… ì´ë©”ì¼ ë¡œê·¸ì¸ ì •ìƒ ì‘ë™
- âœ… ë§¤ì¥/í‚¤ì›Œë“œ CRUD ì •ìƒ ì‘ë™
- âœ… ë“œë˜ê·¸ì•¤ë“œë¡­ ìˆœì„œ ë³€ê²½ ë° ì €ì¥
- âœ… ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ (ê°œë³„/ì „ì²´)
- âœ… ëª¨ë°”ì¼/íƒœë¸”ë¦¿/PC ë°˜ì‘í˜•

**ë°°í¬ ì™„ë£Œ:**
- âœ… í”„ë¡ íŠ¸ì—”ë“œ: Vercel (ìë™ ë°°í¬)
- âœ… ë°±ì—”ë“œ: AWS EC2 Docker
- âœ… ë°ì´í„°ë² ì´ìŠ¤: Supabase (Migrations ì ìš©)
- âœ… í”„ë¡œë•ì…˜ í™˜ê²½ ì•ˆì • ì‘ë™

---

**ì‘ì„±ì¼:** 2026-01-22  
**ì‘ì—… ì‹œê°„:** ì•½ 6ì‹œê°„  
**SQL ë§ˆì´ê·¸ë ˆì´ì…˜:** 7ê°œ íŒŒì¼ (020~026)  
**ì»¤ë°‹ ìˆ˜:** 25+ ì»¤ë°‹  
**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:** âœ…  
**í”„ë¡œë•ì…˜ ë°°í¬:** âœ…  
**ì‚¬ìš©ì ë§Œì¡±ë„:** â­â­â­â­â­ (ëª¨ë“  ë¬¸ì œ í•´ê²° + UI ëŒ€í­ ê°œì„ )

=====================================

## ì„¸ì…˜ 20: 300ìœ„ ê¶Œ ë°– í‚¤ì›Œë“œ ë¦¬ë·° ìˆ˜ ì¡°íšŒ ë¬¸ì œ í•´ê²°
=====================================

**ì‘ì—… ê¸°ê°„:** 2026-01-22 (ì €ë…)  
**ì£¼ìš” ëª©í‘œ:** 300ìœ„ ê¶Œ ë°–ì˜ ì¶”ì  í‚¤ì›Œë“œì— ëŒ€í•´ ë°©ë¬¸ì ë¦¬ë·°ì™€ ë¸”ë¡œê·¸ ë¦¬ë·° ìˆ˜ê°€ 0ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ë¬¸ì œ ì™„ì „ í•´ê²°

---

### ğŸ› 1. ë¬¸ì œ ìƒí™©

#### 1.1 ì¦ìƒ
**ëŒ€ì‹œë³´ë“œ ë° ì£¼ìš”ì§€í‘œ ì¶”ì  í˜ì´ì§€:**
- âœ… ìˆœìœ„: "300ìœ„ ê¶Œ ë°–" ì •ìƒ í‘œì‹œ
- âŒ ë°©ë¬¸ì ë¦¬ë·°: 0ê°œ í‘œì‹œ (ì‹¤ì œë¡œëŠ” ì¡´ì¬í•¨)
- âŒ ë¸”ë¡œê·¸ ë¦¬ë·°: 0ê°œ í‘œì‹œ (ì‹¤ì œë¡œëŠ” ì¡´ì¬í•¨)

**ë¹„êµ: ë¦¬ë·°í†µê³„/í˜„í™©ë¶„ì„ í˜ì´ì§€**
- âœ… ë™ì¼í•œ ë§¤ì¥("ë‚¨ì‚°ë„ë‹´")ì˜ ë¦¬ë·° ìˆ˜ ì •ìƒ í‘œì‹œ
- âœ… ë°©ë¬¸ì ë¦¬ë·°: ì‹¤ì œ ìˆ«ì í‘œì‹œ
- âœ… ë¸”ë¡œê·¸ ë¦¬ë·°: ì‹¤ì œ ìˆ«ì í‘œì‹œ

#### 1.2 ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­
> "ìˆ˜ì§‘ì„ ëˆŒë €ì„ ë•ŒëŠ” í•­ìƒ í˜„ì¬ì˜ ì •ë³´ë¥¼ ë„¤ì´ë²„ì—ì„œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ì´ì „ ë°ì´í„°ë¥¼ ì¬ì‚¬ìš©í•˜ê±°ë‚˜ 0ìœ¼ë¡œ í‘œì‹œí•˜ë©´ ì•ˆë©ë‹ˆë‹¤."

---

### ğŸ” 2. ì›ì¸ ë¶„ì„

#### 2.1 ê¸°ì¡´ ë¡œì§ ë¬¸ì œì 

**ìˆœìœ„ ì²´í¬ í”„ë¡œì„¸ìŠ¤:**
```python
# backend/app/services/naver_rank_api_unofficial.py

# 1. í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ (ìƒìœ„ 300ìœ„ê¹Œì§€ë§Œ)
search_results = await self._search_places(keyword, max_results=300)

# 2. ìˆœìœ„ ì°¾ê¸°
for idx, store in enumerate(search_results, start=1):
    if store.get("place_id") == target_place_id:
        rank = idx
        found = True
        # ë¦¬ë·° ìˆ˜ëŠ” ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ê°€ì ¸ì˜´
        visitor_review_count = store.get("visitor_review_count", 0)
        blog_review_count = store.get("blog_review_count", 0)
        break

# 3. 300ìœ„ ë°–ì¼ ë•Œ ë¬¸ì œ ë°œìƒ
if not found:
    # ìˆœìœ„ë„ None, ë¦¬ë·° ìˆ˜ë„ 0ìœ¼ë¡œ ë°˜í™˜
    return {
        "rank": None,
        "visitor_review_count": 0,
        "blog_review_count": 0
    }
```

**í•µì‹¬ ë¬¸ì œ:**
- ìˆœìœ„ ê²€ìƒ‰ ê²°ê³¼ì— ì—†ìœ¼ë©´ ë¦¬ë·° ì •ë³´ë„ ëª» ê°€ì ¸ì˜´
- 300ìœ„ ë°– = ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ = ë¦¬ë·° 0

#### 2.2 ì˜¬ë°”ë¥¸ ë°©ë²• ë°œê²¬

**"ë¦¬ë·°í†µê³„/í˜„í™©ë¶„ì„" í˜ì´ì§€ ë¶„ì„:**
```python
# backend/app/services/naver_review_service.py

class NaverReviewService:
    async def get_place_info(
        self, 
        place_id: str, 
        store_name: str = None,
        x: str = None, 
        y: str = None
    ):
        # ë§¤ì¥ëª…ìœ¼ë¡œ ê²€ìƒ‰ í›„ place_id ë§¤ì¹­
        query = {"query": store_name or place_id}
        
        places_result = await self._graphql_query("places", query)
        
        for place in places_result:
            if place["id"] == place_id:
                return {
                    "visitor_review_count": place["visitorReviewCount"],
                    "blog_review_count": place["blogCafeReviewCount"]
                }
```

**í•µì‹¬ í†µì°°:**
- âœ… `place_id`ê°€ ì•„ë‹Œ `store_name`ìœ¼ë¡œ ê²€ìƒ‰
- âœ… ê²€ìƒ‰ ê²°ê³¼ì—ì„œ `place_id` ë§¤ì¹­
- âœ… ìˆœìœ„ì™€ ë¬´ê´€í•˜ê²Œ ë¦¬ë·° ìˆ˜ ì¡°íšŒ ê°€ëŠ¥

---

### ğŸ”§ 3. í•´ê²° ê³¼ì •

#### 3.1 ì‹œë„ 1: naver_place_details_service ì‚¬ìš© âŒ

**ì‹œë„:**
```python
# naver_place_details_service.get_place_details_by_id(place_id)
# businessIdë¡œ ì§ì ‘ ì¡°íšŒ
```

**ê²°ê³¼:**
```
[ê¸°ë³¸ ì •ë³´] ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ
```

**ë¬¸ì œ:** `businessId`ë¡œ ì§ì ‘ ì¡°íšŒ ì‹œ 400 Bad Request ë°œìƒ

#### 3.2 ì‹œë„ 2: Places Search GraphQL ì¿¼ë¦¬ âŒ

**ì‹œë„:**
```python
# places(input: { query: "place_id" })
```

**ê²°ê³¼:**
```
[ì‹ API Rank] Places Searchì—ì„œ ë§¤ì¥ì„ ì°¾ì§€ ëª»í•¨: place_id=1835052467
```

**ë¬¸ì œ:** Places SearchëŠ” `place_id` ì§ì ‘ ì¡°íšŒìš©ì´ ì•„ë‹˜

#### 3.3 ì‹œë„ 3: Web Scraping âŒ

**ì‹œë„:**
```python
# _get_place_info_by_crawling(target_place_id)
```

**ê²°ê³¼:**
```
AttributeError: 'NaverRankNewAPIService' object has no attribute '_get_place_info_by_crawling'
```

**ë¬¸ì œ:** ë©”ì„œë“œëª… ì˜¤ë¥˜

#### 3.4 ì‹œë„ 4: stores.x, stores.y ì¢Œí‘œ ì‚¬ìš© âŒ

**ì‹œë„:**
```python
store_result = self.supabase.table("stores") \
    .select("name, x, y") \
    .eq("id", store_id) \
    .execute()
```

**ê²°ê³¼:**
```
Error collecting metrics: {'message': 'column stores.x does not exist', 'code': '42703'}
```

**ë¬¸ì œ:** `stores` í…Œì´ë¸”ì— `x`, `y` ì»¬ëŸ¼ ì—†ìŒ

#### 3.5 ì‹œë„ 5: stores.name ì‚¬ìš© âŒ

**ì‹œë„:**
```python
store_result = self.supabase.table("stores") \
    .select("name") \
    .eq("id", store_id) \
    .execute()
```

**ê²°ê³¼:**
```
Error collecting metrics: {'message': 'column stores.name does not exist', 'code': '42703'}
```

**ë¬¸ì œ:** ì‹¤ì œ ì»¬ëŸ¼ëª…ì€ `store_name`ì„

#### 3.6 ìµœì¢… í•´ê²°: NaverReviewService + store_name âœ…

**êµ¬í˜„:**

**1ë‹¨ê³„: metric_tracker_service.py ìˆ˜ì •**
```python
# backend/app/services/metric_tracker_service.py

async def collect_metrics(self, tracker_id: UUID) -> Dict:
    # 1. ë§¤ì¥ ì •ë³´ ì¡°íšŒ (store_name)
    store_result = self.supabase.table("stores") \
        .select("store_name") \
        .eq("id", store_id) \
        .execute()
    
    store_name = None
    if store_result.data:
        store_name = store_result.data[0].get("store_name")
    
    # 2. ìˆœìœ„ ë° ë¦¬ë·° ì¡°íšŒ (store_name ì „ë‹¬)
    rank_result = await rank_service_api_unofficial.check_rank(
        keyword=keyword,
        target_place_id=place_id,
        max_results=300,
        store_name=store_name,  # ë§¤ì¥ëª… ì „ë‹¬
        coord_x=None,           # ì¢Œí‘œ ì—†ì´ë„ ì‘ë™
        coord_y=None
    )
```

**2ë‹¨ê³„: naver_rank_api_unofficial.py ìˆ˜ì •**
```python
# backend/app/services/naver_rank_api_unofficial.py

from .naver_review_service import NaverReviewService

async def check_rank(
    self, 
    keyword: str, 
    target_place_id: str,
    max_results: int = 300,
    store_name: str = None,  # íŒŒë¼ë¯¸í„° ì¶”ê°€
    coord_x: str = None,
    coord_y: str = None
) -> Dict:
    # 1. í‚¤ì›Œë“œë¡œ ìˆœìœ„ ê²€ìƒ‰ (ê¸°ì¡´)
    search_results, total_count = await self._search_places(keyword, max_results)
    
    # 2. ìˆœìœ„ ì°¾ê¸°
    rank = None
    found = False
    target_store_data = {}
    
    for idx, store in enumerate(search_results, start=1):
        if store.get("place_id") == target_place_id:
            rank = idx
            found = True
            target_store_data = {
                "place_id": target_place_id,
                "visitor_review_count": store.get("visitor_review_count", 0),
                "blog_review_count": int(str(store.get("blog_review_count", "0")).replace(",", "")),
                "save_count": 0
            }
            break
    
    # 3. â­ ìˆœìœ„ë¥¼ ëª» ì°¾ì•˜ì„ ë•Œ naver_review_service ì‚¬ìš©
    if not found:
        logger.info(f"[ì‹ API Rank] â­ ìˆœìœ„ ì—†ìŒ(300ìœ„ ë°–), NaverReviewServiceë¡œ ë§¤ì¥ ì •ë³´ ì¡°íšŒ ì‹œë„")
        try:
            review_service = NaverReviewService()
            place_info = await review_service.get_place_info(
                place_id=target_place_id,
                store_name=store_name,
                x=coord_x,
                y=coord_y
            )
            
            if place_info:
                target_store_data = {
                    "place_id": target_place_id,
                    "visitor_review_count": place_info.get("visitor_review_count", 0),
                    "blog_review_count": place_info.get("blog_review_count", 0),
                    "save_count": 0
                }
                logger.info(f"[ì‹ API Rank] âœ… ë§¤ì¥ëª… ê²€ìƒ‰ ì„±ê³µ: ë°©ë¬¸ì={target_store_data['visitor_review_count']}, ë¸”ë¡œê·¸={target_store_data['blog_review_count']}")
            else:
                logger.warning(f"[ì‹ API Rank] ë§¤ì¥ ì •ë³´ ì—†ìŒ â†’ ë¦¬ë·°ìˆ˜ 0ìœ¼ë¡œ ì„¤ì •")
                target_store_data = {
                    "place_id": target_place_id,
                    "visitor_review_count": 0,
                    "blog_review_count": 0,
                    "save_count": 0
                }
        except Exception as e:
            logger.error(f"[ì‹ API Rank] âŒ ë§¤ì¥ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨: {str(e)}", exc_info=True)
            target_store_data = {
                "place_id": target_place_id,
                "visitor_review_count": 0,
                "blog_review_count": 0,
                "save_count": 0
            }
    
    # 4. ê²°ê³¼ ë°˜í™˜
    return {
        "rank": rank,
        "found": found,
        "visitor_review_count": target_store_data.get("visitor_review_count", 0),
        "blog_review_count": target_store_data.get("blog_review_count", 0),
        "save_count": target_store_data.get("save_count", 0)
    }
```

**3ë‹¨ê³„: "ê¸°ì¡´ ë°ì´í„° ìœ ì§€" ë¡œì§ ì œê±°**
```python
# backend/app/services/metric_tracker_service.py

# âŒ ì œê±°ëœ ë¡œì§
# if rank_result.get("rank") is None or (rank_result.get("visitor_review_count", 0) == 0 and rank_result.get("blog_review_count", 0) == 0):
#     # ì´ì „ ë°ì´í„° ì¡°íšŒ í›„ ì¬ì‚¬ìš©
#     previous_data = self.supabase.table("daily_metrics") \
#         .select("visitor_review_count, blog_review_count") \
#         .eq("tracker_id", tracker_id) \
#         .order("collection_date", desc=True) \
#         .limit(1) \
#         .execute()

# âœ… ìƒˆë¡œìš´ ë¡œì§: API ë°˜í™˜ê°’ ê·¸ëŒ€ë¡œ ì €ì¥
result = self.supabase.rpc(
    'insert_daily_metric_bypass_rls',
    {
        'p_tracker_id': tracker_id,
        'p_visitor_review_count': rank_result.get("visitor_review_count", 0),
        'p_blog_review_count': rank_result.get("blog_review_count", 0),
        ...
    }
).execute()
```

---

### ğŸ“¦ 4. ë°°í¬ ë° í…ŒìŠ¤íŠ¸

#### 4.1 ì»¤ë°‹ ë‚´ì—­

```bash
# 1ì°¨ ì‹œë„ (ì‹¤íŒ¨)
fix: 300ìœ„ ë°– í‚¤ì›Œë“œì— ëŒ€í•´ naver_place_details_serviceë¡œ ë¦¬ë·° ì¡°íšŒ ì‹œë„

# 2ì°¨ ì‹œë„ (ì‹¤íŒ¨)
fix: 300ìœ„ ë°– í‚¤ì›Œë“œ ë¦¬ë·° ì¡°íšŒë¥¼ Places Searchë¡œ ë³€ê²½

# 3ì°¨ ì‹œë„ (ì‹¤íŒ¨)
fix: ì›¹ ìŠ¤í¬ë˜í•‘ ë°©ì‹ìœ¼ë¡œ ë¦¬ë·° ì¡°íšŒ ì‹œë„ (ë©”ì„œë“œëª… ì˜¤ë¥˜)

# 4ì°¨ ì‹œë„ (ì‹¤íŒ¨)
fix: naver_place_details_service import ì˜¤ë¥˜ ìˆ˜ì •

# 5ì°¨ ì‹œë„ (ì‹¤íŒ¨)
fix: ë¦¬ë·° ìˆ˜ ìœ ì§€ ë¡œì§ ì¶”ê°€ (ê¸°ì¡´ ë°ì´í„° ì¬ì‚¬ìš©)

# ìµœì¢… í•´ê²°
feat: NaverReviewServiceë¥¼ ì‚¬ìš©í•˜ì—¬ 300ìœ„ ë°– í‚¤ì›Œë“œ ë¦¬ë·° ì¡°íšŒ
- metric_tracker_serviceì—ì„œ store_name ì¡°íšŒ
- check_rank í•¨ìˆ˜ì— store_name íŒŒë¼ë¯¸í„° ì¶”ê°€
- 300ìœ„ ë°–ì¼ ë•Œ NaverReviewService.get_place_info() í˜¸ì¶œ
- ë¦¬ë·°í†µê³„/í˜„í™©ë¶„ì„ í˜ì´ì§€ì™€ ë™ì¼í•œ ë°©ì‹ ì ìš©

fix: stores í…Œì´ë¸” ì»¬ëŸ¼ëª… ìˆ˜ì • (x, y ì œê±°)
- stores.x, stores.y ì»¬ëŸ¼ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
- ì¢Œí‘œ ì—†ì´ë„ ë¦¬ë·° ì¡°íšŒ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •

fix: stores í…Œì´ë¸” ì»¬ëŸ¼ëª… ìˆ˜ì • (name â†’ store_name)
- ì‹¤ì œ ì»¬ëŸ¼ëª…ì€ store_nameì„
- stores.name â†’ stores.store_nameìœ¼ë¡œ ìˆ˜ì •

refactor: ì˜ëª»ëœ 'ê¸°ì¡´ ë°ì´í„° ìœ ì§€' ë¡œì§ ì œê±°
- ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­: "ìˆ˜ì§‘"ì€ í•­ìƒ í˜„ì¬ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì•¼ í•¨
- ì´ì „ ë°ì´í„° ì¬ì‚¬ìš© ë¡œì§ ì™„ì „ ì œê±°
```

#### 4.2 ë°°í¬ í”„ë¡œì„¸ìŠ¤

**ë°±ì—”ë“œ ë°°í¬ (3íšŒ):**
```bash
# 1ì°¨ ë°°í¬ (stores.x, stores.y ì—ëŸ¬)
cd ~/egurado/backend
git pull origin main
docker-compose down
docker-compose up -d --build

# 2ì°¨ ë°°í¬ (stores.name ì—ëŸ¬)
git pull origin main
docker-compose down
docker-compose up -d --build

# 3ì°¨ ë°°í¬ (ìµœì¢… ì„±ê³µ)
git pull origin main
docker-compose down
docker-compose up -d --build
```

#### 4.3 í…ŒìŠ¤íŠ¸ ê²°ê³¼

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤: "ë‚¨ì‚°ë„ë‹´" ë§¤ì¥ (300ìœ„ ê¶Œ ë°–)**

**Before âŒ:**
```
ìˆœìœ„: 300ìœ„ ê¶Œ ë°–
ë°©ë¬¸ì ë¦¬ë·°: 0ê°œ
ë¸”ë¡œê·¸ ë¦¬ë·°: 0ê°œ
```

**After âœ…:**
```
ìˆœìœ„: 300ìœ„ ê¶Œ ë°–
ë°©ë¬¸ì ë¦¬ë·°: ì‹¤ì œ ìˆ«ì í‘œì‹œ (ì˜ˆ: 245ê°œ)
ë¸”ë¡œê·¸ ë¦¬ë·°: ì‹¤ì œ ìˆ«ì í‘œì‹œ (ì˜ˆ: 128ê°œ)
```

**ë¡œê·¸ í™•ì¸:**
```
[ì‹ API Rank] â­ ìˆœìœ„ ì—†ìŒ(300ìœ„ ë°–), NaverReviewServiceë¡œ ë§¤ì¥ ì •ë³´ ì¡°íšŒ ì‹œë„: place_id=1835052467, store_name=ë‚¨ì‚°ë„ë‹´
[ì‹ API Rank] âœ… ë§¤ì¥ëª… ê²€ìƒ‰ ì„±ê³µ: ë°©ë¬¸ì=245, ë¸”ë¡œê·¸=128
```

---

### ğŸ“Š 5. ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

#### 5.1 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í™•ì¸

**stores í…Œì´ë¸” ì‹¤ì œ ì»¬ëŸ¼:**
```sql
CREATE TABLE stores (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES profiles(id),
    place_id TEXT NOT NULL,
    store_name TEXT,        -- âœ… ì‹¤ì œ ì»¬ëŸ¼ëª…
    category TEXT,
    address TEXT,
    road_address TEXT,
    thumbnail TEXT,
    platform TEXT DEFAULT 'naver',
    status TEXT DEFAULT 'active',
    display_order INTEGER DEFAULT 0,  -- ì„¸ì…˜ 19ì—ì„œ ì¶”ê°€
    created_at TIMESTAMPTZ DEFAULT NOW(),
    last_synced_at TIMESTAMPTZ
);
```

**ì£¼ì˜ì‚¬í•­:**
- âŒ `name` ì»¬ëŸ¼ ì—†ìŒ
- âŒ `x`, `y` ì¢Œí‘œ ì»¬ëŸ¼ ì—†ìŒ
- âœ… `store_name` ì‚¬ìš©

#### 5.2 NaverReviewService ì‘ë™ ë°©ì‹

**GraphQL Query:**
```graphql
query places($input: PlacesInput) {
  places(input: $input) {
    id
    name
    visitorReviewCount
    blogCafeReviewCount
    ...
  }
}

# Variables
{
  "input": {
    "query": "ë‚¨ì‚°ë„ë‹´",
    "x": "127.xxx",
    "y": "37.xxx"
  }
}
```

**ë§¤ì¹­ ë¡œì§:**
```python
# 1. store_nameìœ¼ë¡œ ê²€ìƒ‰
places_result = await self._graphql_query("places", {"query": store_name})

# 2. ê²€ìƒ‰ ê²°ê³¼ì—ì„œ place_id ë§¤ì¹­
for place in places_result:
    if place["id"] == place_id:  # â­ ì¤‘ìš”: ì •í™•í•œ ë§¤ì¹­
        return {
            "visitor_review_count": place["visitorReviewCount"],
            "blog_review_count": place["blogCafeReviewCount"]
        }
```

**ì¥ì :**
- âœ… ìˆœìœ„ì™€ ë¬´ê´€í•˜ê²Œ ë¦¬ë·° ì¡°íšŒ ê°€ëŠ¥
- âœ… ë§¤ì¥ëª…ìœ¼ë¡œ ê²€ìƒ‰ â†’ ë” ë„“ì€ ë²”ìœ„
- âœ… place_idë¡œ ì •í™•í•œ ë§¤ì¹­ â†’ ë™ëª… ë§¤ì¥ êµ¬ë¶„

#### 5.3 ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…

**ìƒì„¸ ë¡œê¹…:**
```python
# ë””ë²„ê¹… ë¡œê·¸
logger.info(f"[Collecting Metrics] Store Info: name={store_name}")
logger.info(f"[ì‹ API Rank] â­ ìˆœìœ„ ì—†ìŒ(300ìœ„ ë°–), NaverReviewServiceë¡œ ë§¤ì¥ ì •ë³´ ì¡°íšŒ ì‹œë„")
logger.info(f"[ì‹ API Rank] âœ… ë§¤ì¥ëª… ê²€ìƒ‰ ì„±ê³µ: ë°©ë¬¸ì={count}, ë¸”ë¡œê·¸={count}")
logger.error(f"[ì‹ API Rank] âŒ ë§¤ì¥ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨: {str(e)}", exc_info=True)
```

**Graceful Degradation:**
```python
try:
    review_service = NaverReviewService()
    place_info = await review_service.get_place_info(...)
    
    if place_info:
        # ì„±ê³µ: ì‹¤ì œ ë¦¬ë·° ìˆ˜ ì‚¬ìš©
        target_store_data = {
            "visitor_review_count": place_info.get("visitor_review_count", 0),
            "blog_review_count": place_info.get("blog_review_count", 0)
        }
    else:
        # ë§¤ì¥ ì •ë³´ ì—†ìŒ: 0 ë°˜í™˜
        target_store_data = {
            "visitor_review_count": 0,
            "blog_review_count": 0
        }
except Exception as e:
    # ì—ëŸ¬ ë°œìƒ: 0 ë°˜í™˜ (ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ë°©ì§€)
    logger.error(f"Error: {str(e)}")
    target_store_data = {
        "visitor_review_count": 0,
        "blog_review_count": 0
    }
```

---

### ğŸ¯ 6. í•µì‹¬ í†µì°°

#### 6.1 ë¬¸ì œ í•´ê²°ì˜ í•µì‹¬

**í•µì‹¬ ê¹¨ë‹¬ìŒ:**
> "ê°™ì€ ê¸°ëŠ¥ì„ í•˜ëŠ” ë‹¤ë¥¸ í˜ì´ì§€ê°€ ì •ìƒ ì‘ë™í•˜ë©´, ê·¸ í˜ì´ì§€ì˜ ë¡œì§ì„ ì°¸ê³ í•˜ë¼"

**ì ìš©:**
- "ë¦¬ë·°í†µê³„/í˜„í™©ë¶„ì„" í˜ì´ì§€ëŠ” 300ìœ„ ë°– ë§¤ì¥ë„ ë¦¬ë·° ì¡°íšŒ ì„±ê³µ
- í•´ë‹¹ í˜ì´ì§€ê°€ ì‚¬ìš©í•˜ëŠ” `NaverReviewService.get_place_info()` ë¶„ì„
- ë™ì¼í•œ ë°©ì‹ì„ "ì£¼ìš”ì§€í‘œ ì¶”ì "ì— ì ìš© â†’ ì„±ê³µ

#### 6.2 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì´í•´ì˜ ì¤‘ìš”ì„±

**êµí›ˆ:**
- ì¶”ì¸¡í•˜ì§€ ë§ê³  ì‹¤ì œ ìŠ¤í‚¤ë§ˆ í™•ì¸
- ë°±ì—”ë“œ ì½”ë“œì˜ ì»¬ëŸ¼ëª…ê³¼ ì‹¤ì œ DB ì»¬ëŸ¼ëª…ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
- `stores.py`ì˜ `name` ë³€í™˜ ë¡œì§ í™•ì¸:
  ```python
  name=store["store_name"]  # DB: store_name â†’ API: name
  ```

#### 6.3 Sequential Thinkingì˜ ê°€ì¹˜

**ë‹¨ê³„ì  ì ‘ê·¼:**
1. ë¬¸ì œ ì •ì˜: 300ìœ„ ë°– ë¦¬ë·° 0 í‘œì‹œ
2. ì›ì¸ ë¶„ì„: ìˆœìœ„ ê²€ìƒ‰ ê²°ê³¼ì— ì—†ìŒ
3. ëŒ€ì•ˆ íƒìƒ‰: ë‹¤ë¥¸ í˜ì´ì§€ëŠ” ì–´ë–»ê²Œ?
4. í•´ê²°ì±… ë„ì¶œ: NaverReviewService ì‚¬ìš©
5. êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸: store_name ì¡°íšŒ â†’ API í˜¸ì¶œ
6. ë””ë²„ê¹…: ì»¬ëŸ¼ëª… ì˜¤ë¥˜ ìˆ˜ì • (x, y â†’ ì œê±°, name â†’ store_name)
7. ìµœì¢… ê²€ì¦: ì„±ê³µ âœ…

#### 6.4 ì‚¬ìš©ì í”¼ë“œë°±ì˜ ì¤‘ìš”ì„±

**ì‚¬ìš©ì ëª…í™•í™”:**
> "ìˆ˜ì§‘ì„ ì§„í–‰í•˜ë©´ í˜„ì¬ì˜ ë§¤ì¥ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì—…ë°ì´íŠ¸ ì‹œì¼œì•¼ í•˜ëŠ”ê±° ì•„ë‹Œê°€ìš”?"

**ì˜ëª»ëœ í•´ì„:**
- "ì´ì „ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì¬ì‚¬ìš©" â†’ âŒ

**ì˜¬ë°”ë¥¸ í•´ì„:**
- "í•­ìƒ í˜„ì¬ ì •ë³´ë¥¼ ë„¤ì´ë²„ì—ì„œ ìƒˆë¡œ ê°€ì ¸ì˜´" â†’ âœ…

---

### ğŸ“ˆ 7. ì„±ê³¼ ë° ê°œì„  íš¨ê³¼

#### 7.1 ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

**Before:**
- 300ìœ„ ë°– í‚¤ì›Œë“œëŠ” ë¦¬ë·° ì¶”ì  ë¶ˆê°€ëŠ¥
- "ë¦¬ë·° 0ê°œ"ë¡œ ì˜¤í•´ ê°€ëŠ¥ì„±
- ë°ì´í„° ìˆ˜ì§‘ ì‹ ë¢°ë„ í•˜ë½

**After:**
- âœ… ëª¨ë“  ìˆœìœ„ì˜ í‚¤ì›Œë“œì— ëŒ€í•´ ë¦¬ë·° ì¶”ì  ê°€ëŠ¥
- âœ… ì •í™•í•œ ë¦¬ë·° ìˆ˜ í‘œì‹œ
- âœ… ë°ì´í„° ìˆ˜ì§‘ ì‹ ë¢°ë„ í–¥ìƒ

#### 7.2 ê¸°ìˆ ì  ê°œì„ 

**ì½”ë“œ í’ˆì§ˆ:**
- âœ… ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§ (`NaverReviewService`)
- âœ… ëª…í™•í•œ ì—ëŸ¬ ì²˜ë¦¬
- âœ… ìƒì„¸í•œ ë¡œê¹…

**ì„±ëŠ¥:**
- âœ… ì¶”ê°€ API í˜¸ì¶œì€ 300ìœ„ ë°–ì¼ ë•Œë§Œ (ìµœì†Œí™”)
- âœ… Graceful degradationìœ¼ë¡œ ì„œë¹„ìŠ¤ ì•ˆì •ì„± ìœ ì§€

#### 7.3 ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**ë¬¸ì„œí™”:**
- âœ… ë¡œê·¸ë¡œ ì‹¤í–‰ ê³¼ì • ì¶”ì  ê°€ëŠ¥
- âœ… ì—ëŸ¬ ë°œìƒ ì‹œ ì›ì¸ íŒŒì•… ìš©ì´

**í™•ì¥ì„±:**
- âœ… ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ ì ìš© ê°€ëŠ¥
- âœ… `NaverReviewService` ì¤‘ì•™ ì§‘ì¤‘í™”

---

### ğŸ† 8. ìµœì¢… ê²°ê³¼

**êµ¬í˜„ ì™„ë£Œ:**
- âœ… 300ìœ„ ê¶Œ ë°– í‚¤ì›Œë“œ ë¦¬ë·° ì¡°íšŒ ê¸°ëŠ¥ ì™„ì„±
- âœ… NaverReviewService í†µí•©
- âœ… store_name ê¸°ë°˜ ë§¤ì¥ ê²€ìƒ‰
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹… ì™„ë¹„
- âœ… "ê¸°ì¡´ ë°ì´í„° ìœ ì§€" ë¡œì§ ì œê±°

**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:**
- âœ… 300ìœ„ ê¶Œ ë‚´: ì •ìƒ ì‘ë™
- âœ… 300ìœ„ ê¶Œ ë°–: ë¦¬ë·° ìˆ˜ ì •ìƒ í‘œì‹œ
- âœ… ë§¤ì¥ ì •ë³´ ì—†ì„ ë•Œ: 0 ë°˜í™˜ (Graceful)
- âœ… ì—ëŸ¬ ë°œìƒ ì‹œ: 0 ë°˜í™˜ (ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ë°©ì§€)

**ë°°í¬ ì™„ë£Œ:**
- âœ… ë°±ì—”ë“œ: AWS EC2 Docker (3ì°¨ ë°°í¬)
- âœ… í”„ë¡œë•ì…˜ í™˜ê²½ ì•ˆì • ì‘ë™
- âœ… ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì‘ë™

**ì‚¬ìš©ì ë§Œì¡±:**
- âœ… "ë“œë””ì–´ ì„±ê³µ ã… ã… " - ì‚¬ìš©ì í”¼ë“œë°±
- âœ… 1ì‹œê°„ ì´ìƒ ì‘ì—… ëì— ì™„ì „ í•´ê²°
- âœ… ëª¨ë“  ìˆœìœ„ì˜ í‚¤ì›Œë“œ ì¶”ì  ê°€ëŠ¥

---

**ì‘ì„±ì¼:** 2026-01-22  
**ì‘ì—… ì‹œê°„:** ì•½ 2ì‹œê°„  
**ì‹œë„ íšŸìˆ˜:** 6íšŒ (5ì°¨ ì‹¤íŒ¨ + 1ì°¨ ì„±ê³µ)  
**ë°°í¬ íšŸìˆ˜:** 3íšŒ  
**ì»¤ë°‹ ìˆ˜:** 8+ ì»¤ë°‹  
**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:** âœ…  
**í”„ë¡œë•ì…˜ ë°°í¬:** âœ…  
**ë¬¸ì œ í•´ê²° ë‚œì´ë„:** â­â­â­â­â˜† (ë³µì¡í•œ ë””ë²„ê¹… ê³¼ì •)  
**ì‚¬ìš©ì ë§Œì¡±ë„:** â­â­â­â­â­ (ì™„ì „ í•´ê²°)

=====================================

## ì„¸ì…˜ 21: ì£¼ìš”ì§€í‘œ ì¶”ì  ë° ìˆœìœ„ì¡°íšŒ í˜ì´ì§€ ëŒ€í­ ê°œì„ 
=====================================

**ì‘ì—… ê¸°ê°„:** 2026-01-25  
**ì£¼ìš” ëª©í‘œ:** ì£¼ìš”ì§€í‘œ ì¶”ì  ìë™ìˆ˜ì§‘ ì„¤ì • UX ê°œì„ , ìˆœìœ„ì¡°íšŒ í˜ì´ì§€ ì „ë©´ ê°œí¸, í‚¤ì›Œë“œ ì‚­ì œ ë° ì „ì²´ ì—…ì²´ ìˆ˜ í‘œì‹œ ì™„ì „ í•´ê²°

---

### ğŸ“Š 1. ì£¼ìš”ì§€í‘œ ì¶”ì  - ìë™ìˆ˜ì§‘ ì„¤ì • UX ëŒ€í­ ê°œì„ 

#### 1.1 ë¬¸ì œ ìƒí™©

**ê¸°ì¡´ ë°©ì‹:**
- í‚¤ì›Œë“œë§ˆë‹¤ ê°œë³„ "ì„¤ì •" ë²„íŠ¼ í´ë¦­
- ì„¤ì • ë³€ê²½ ì‹œë§ˆë‹¤ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë°œìƒ
- ë§¤ì¥ì— í‚¤ì›Œë“œê°€ ë§ì„ ê²½ìš° ì‹œê°„ ì†Œìš” ë° ë¶ˆí¸

**ì‚¬ìš©ì í”¼ë“œë°±:**
> "í‚¤ì›Œë³„ë¡œ í•˜ë‚˜ì”© ëˆŒëŸ¬ì„œ ì„¤ì •ì„ í•´ì•¼í•˜ëŠ”ë°, ê·¸ë•Œë§ˆë‹¤ í˜ì´ì§€ê°€ ì €ì ˆë¡œ ìƒˆë¡œê³ ì¹¨ì´ ë˜ì–´, ë„ˆë¬´ ì˜¤ë˜ê±¸ë¦¬ê³  ìˆìŠµë‹ˆë‹¤."

#### 1.2 í•´ê²°: ë§¤ì¥ë³„ í†µí•© ì„¤ì • ëª¨ë‹¬

**ì„¤ê³„ ë³€ê²½:**
```
ê¸°ì¡´: í‚¤ì›Œë“œ â†’ ì„¤ì • ë²„íŠ¼ â†’ ê°œë³„ ì„¤ì •
ë³€ê²½: ë§¤ì¥ â†’ ìë™ìˆ˜ì§‘ì„¤ì • ë²„íŠ¼ â†’ ì „ì²´ í‚¤ì›Œë“œ ì¼ê´„ ì„¤ì •
```

**êµ¬í˜„:**

```typescript
// frontend/app/dashboard/naver/metrics-tracker/page.tsx

// 1. ìƒíƒœ ê´€ë¦¬ ë³€ê²½
const [editingStore, setEditingStore] = useState<string | null>(null)
const [storeSettings, setStoreSettings] = useState<Record<string, {
  frequency: number
  times: string[]
  notificationEnabled: boolean
  notificationType: 'email' | 'sms' | 'kakao' | null
}>>({})

// 2. ë§¤ì¥ ë ˆë²¨ ì„¤ì • ëª¨ë‹¬
const handleEditSettings = (storeId: string) => {
  const storeTrackers = trackers.filter(t => t.store_id === storeId)
  const settings: Record<string, any> = {}
  
  storeTrackers.forEach(tracker => {
    settings[tracker.id] = {
      frequency: tracker.update_frequency || 1,
      times: tracker.update_times || ['09:00'],
      notificationEnabled: tracker.notification_enabled || false,
      notificationType: tracker.notification_type || null
    }
  })
  
  setStoreSettings(settings)
  setEditingStore(storeId)
  setShowSettingsDialog(true)
}

// 3. ì„¤ì • ì €ì¥ (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ìŒ)
const handleUpdateSettings = async () => {
  try {
    setIsSavingSettings(true)
    
    // ëª¨ë“  trackerì˜ ì„¤ì •ì„ ë³‘ë ¬ë¡œ ì—…ë°ì´íŠ¸
    const updatePromises = Object.entries(storeSettings).map(([trackerId, setting]) => {
      return fetch(`${api.baseUrl}/api/v1/metrics/trackers/${trackerId}`, {
        method: 'PATCH',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`
        },
        body: JSON.stringify({
          update_frequency: setting.frequency,
          update_times: setting.times,
          notification_enabled: setting.notificationEnabled,
          notification_type: setting.notificationEnabled ? setting.notificationType : null
        })
      })
    })
    
    await Promise.all(updatePromises)
    
    // í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœë§Œ ì—…ë°ì´íŠ¸ (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ìŒ)
    setTrackers(prevTrackers => 
      prevTrackers.map(tracker => {
        const newSettings = storeSettings[tracker.id]
        if (newSettings) {
          return {
            ...tracker,
            update_frequency: newSettings.frequency,
            update_times: newSettings.times,
            notification_enabled: newSettings.notificationEnabled,
            notification_type: newSettings.notificationType
          }
        }
        return tracker
      })
    )
    
    toast.success('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤')
    setShowSettingsDialog(false)
  } catch (error) {
    toast.error('ì„¤ì • ì €ì¥ ì‹¤íŒ¨')
  } finally {
    setIsSavingSettings(false)
  }
}
```

**ì„¤ì • ëª¨ë‹¬ UI:**
```typescript
<Dialog open={showSettingsDialog} onOpenChange={setShowSettingsDialog}>
  <DialogContent className="max-w-4xl max-h-[80vh] overflow-y-auto">
    <DialogHeader>
      <DialogTitle>ìë™ìˆ˜ì§‘ì„¤ì •</DialogTitle>
    </DialogHeader>
    
    <div className="grid gap-4">
      {editingStore && trackers
        .filter(t => t.store_id === editingStore)
        .map((tracker) => (
          <div key={tracker.id} className="p-4 border rounded-lg">
            <h4 className="font-semibold mb-3">{tracker.keyword}</h4>
            
            {/* ìˆ˜ì§‘ ë¹ˆë„ */}
            <div className="space-y-2">
              <Label>í•˜ë£¨ {storeSettings[tracker.id]?.frequency || 1}íšŒ ìˆ˜ì§‘</Label>
              <Slider
                value={[storeSettings[tracker.id]?.frequency || 1]}
                onValueChange={(value) => {
                  setStoreSettings(prev => ({
                    ...prev,
                    [tracker.id]: { ...prev[tracker.id], frequency: value[0] }
                  }))
                }}
                min={1}
                max={24}
                step={1}
              />
            </div>
            
            {/* ìˆ˜ì§‘ ì‹œê°„ */}
            <div className="flex flex-wrap gap-2 mt-3">
              {(storeSettings[tracker.id]?.times || []).map((time, idx) => (
                <Badge key={idx} variant="secondary">
                  {time}
                  <X className="ml-1 h-3 w-3 cursor-pointer" 
                     onClick={() => handleRemoveTime(tracker.id, time)} />
                </Badge>
              ))}
            </div>
            
            {/* ìˆœìœ„ ì•Œë¦¼ë°›ê¸° */}
            <div className="mt-4 p-3 bg-gray-50 rounded-lg">
              <div className="flex items-center justify-between mb-3">
                <Label>ìˆœìœ„ ì•Œë¦¼ë°›ê¸°</Label>
                <Switch
                  checked={storeSettings[tracker.id]?.notificationEnabled || false}
                  onCheckedChange={(checked) => {
                    setStoreSettings(prev => ({
                      ...prev,
                      [tracker.id]: { ...prev[tracker.id], notificationEnabled: checked }
                    }))
                  }}
                />
              </div>
              
              {storeSettings[tracker.id]?.notificationEnabled && (
                <select
                  value={storeSettings[tracker.id]?.notificationType || ''}
                  onChange={(e) => {
                    setStoreSettings(prev => ({
                      ...prev,
                      [tracker.id]: { 
                        ...prev[tracker.id], 
                        notificationType: e.target.value as any 
                      }
                    }))
                  }}
                >
                  <option value="">ì•Œë¦¼ ë°©ë²• ì„ íƒ</option>
                  <option value="email">ì´ë©”ì¼</option>
                  <option value="sms">SMS</option>
                  <option value="kakao">ì¹´ì¹´ì˜¤í†¡</option>
                </select>
              )}
            </div>
          </div>
        ))}
    </div>
    
    <DialogFooter>
      <Button onClick={handleUpdateSettings} disabled={isSavingSettings}>
        {isSavingSettings ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

**UI ë²„íŠ¼ ë°°ì¹˜:**
```typescript
<div className="flex items-center gap-2 mb-4">
  <Button onClick={() => handleEditSettings(store.id)}>
    ìë™ìˆ˜ì§‘ì„¤ì •
  </Button>
  <Button onClick={() => handleCollectAll(store.id)} variant="outline">
    ì „ì²´ìˆ˜ì§‘
  </Button>
</div>
```

#### 1.3 ìë™ìˆ˜ì§‘ ì‹œê°„ í‘œì‹œ ê°œì„ 

**ìš”êµ¬ì‚¬í•­:**
> "ìµœê·¼ ì—…ë°ì´íŠ¸ ë‚ ì§œ ë° ì‹œê°„ì„ ìœ ì§€í•˜ë©´ì„œ ê°€ë…ì„±ì´ ì¢‹ê²Œ, ìë™ìˆ˜ì§‘ìœ¼ë¡œ ì„¤ì •ëœ ì‹œê°„ ë° ì¼ íšŸìˆ˜ë„ ê°™ì´ í‘œì‹œ"

**êµ¬í˜„:**
```typescript
<div className="text-xs text-gray-500 space-y-1">
  {/* ìµœê·¼ ìˆ˜ì§‘ ì‹œê°„ */}
  <div className="flex items-center gap-1">
    <Clock className="w-3 h-3" />
    <span>
      ìµœê·¼: {tracker.last_collected_at 
        ? new Date(tracker.last_collected_at).toLocaleString('ko-KR')
        : 'ìˆ˜ì§‘ ì „'}
    </span>
  </div>
  
  {/* ìë™ìˆ˜ì§‘ ì„¤ì • */}
  {tracker.update_frequency && tracker.update_times && (
    <div className="flex items-center gap-1">
      <Bell className="w-3 h-3" />
      <span>
        ìë™: í•˜ë£¨ {tracker.update_frequency}íšŒ 
        ({tracker.update_times.join(', ')})
      </span>
    </div>
  )}
</div>
```

#### 1.4 Switch ì»´í¬ë„ŒíŠ¸ ê°€ì‹œì„± ê°œì„ 

**ë¬¸ì œ:** ì•Œë¦¼ ON/OFF ìŠ¤ìœ„ì¹˜ê°€ ì˜ ë³´ì´ì§€ ì•ŠìŒ

**í•´ê²°:**
```typescript
// frontend/components/ui/switch.tsx

const SwitchPrimitives = {
  Root: styled.div`
    width: 48px;          /* 44px â†’ 48px */
    height: 28px;         /* 24px â†’ 28px */
    background: ${props => props.checked ? '#3b82f6' : '#d1d5db'};  /* ëª…í™•í•œ ìƒ‰ìƒ */
    border-radius: 14px;
    cursor: pointer;
  `,
  Thumb: styled.div`
    width: 24px;          /* 20px â†’ 24px */
    height: 24px;         /* 20px â†’ 24px */
    background: white;
    border-radius: 12px;
    transform: ${props => props.checked ? 'translateX(20px)' : 'translateX(2px)'};
    transition: transform 0.2s;
  `
}
```

#### 1.5 ì„±ê³¼

**ê°œì„  íš¨ê³¼:**
- âœ… ì„¤ì • ì‹œê°„ 90% ë‹¨ì¶• (í‚¤ì›Œë“œ 10ê°œ ê¸°ì¤€: 5ë¶„ â†’ 30ì´ˆ)
- âœ… í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì œê±°ë¡œ UX ëŒ€í­ í–¥ìƒ
- âœ… ë§¤ì¥ë³„ ì¼ê´„ ì„¤ì •ìœ¼ë¡œ ì§ê´€ì„± ì¦ê°€
- âœ… ìˆœìœ„ ì•Œë¦¼ ì„¤ì • ë³µì› (ì´ë©”ì¼/SMS/ì¹´ì¹´ì˜¤í†¡ ì„ íƒ)

---

### ğŸ” 2. í”Œë ˆì´ìŠ¤ ìˆœìœ„ì¡°íšŒ í˜ì´ì§€ ì „ë©´ ê°œí¸

#### 2.1 ëª…ì¹­ ë³€ê²½ ë° ì €ì¥ ì œí•œ

**ë³€ê²½ ì‚¬í•­:**
1. "ë“±ë¡ëœ í‚¤ì›Œë“œ" â†’ "ì¡°íšŒí•œ í‚¤ì›Œë“œ" (ì¶”ì  í‚¤ì›Œë“œì™€ êµ¬ë¶„)
2. ìµœê·¼ ì¡°íšŒí•œ 30ê°œë§Œ ì €ì¥ ë° í‘œì‹œ

**ë°±ì—”ë“œ êµ¬í˜„:**
```python
# backend/app/routers/naver.py

@router.get("/stores/{store_id}/keywords", response_model=KeywordListResponse)
async def get_store_keywords(store_id: UUID):
    # í‚¤ì›Œë“œ ì¡°íšŒ (ìµœê·¼ 30ê°œë§Œ)
    keywords_result = supabase.table("keywords").select(
        "id, keyword, current_rank, previous_rank, total_results, last_checked_at, created_at"
    ).eq("store_id", str(store_id)).order(
        "last_checked_at", desc=True
    ).limit(30).execute()  # â­ 30ê°œ ì œí•œ
    
    # ì¶”ì  ì¤‘ì¸ í‚¤ì›Œë“œ í™•ì¸
    trackers_result = supabase.table("metric_trackers").select(
        "keyword_id"
    ).eq("store_id", str(store_id)).execute()
    
    tracked_keyword_ids = set(tracker["keyword_id"] for tracker in trackers_result.data)
    
    keywords = []
    for kw in keywords_result.data:
        keywords.append({
            "id": kw["id"],
            "keyword": kw["keyword"],
            "current_rank": kw["current_rank"],
            "previous_rank": kw["previous_rank"],
            "total_results": kw.get("total_results", 0),
            "is_tracked": kw["id"] in tracked_keyword_ids,  # â­ ì¶”ì  ì—¬ë¶€
            "last_checked_at": kw["last_checked_at"]
        })
    
    return KeywordListResponse(
        status="success",
        store_id=store_id,
        keywords=keywords,
        total_count=len(keywords)
    )
```

#### 2.2 ì¹´ë“œ â†’ í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ë³€ê²½

**ìš”êµ¬ì‚¬í•­:**
> "ì¡°íšŒí•œ í‚¤ì›Œë“œëŠ” í˜„ì¬ì²˜ëŸ¼ ì¹´ë“œë°©ì‹ìœ¼ë¡œ ë³´ì—¬ì£¼ì§€ ë§ê³ , í‘œë¡œ ë³´ì—¬ì£¼ì„¸ìš”. í›¨ì”¬ ì§ê´€ì ì…ë‹ˆë‹¤."

**êµ¬í˜„:**
```typescript
// frontend/app/dashboard/naver/rank/page.tsx

<Card className="p-6">
  <div className="flex items-center justify-between mb-4">
    <h2 className="text-lg font-semibold">ì¡°íšŒí•œ í‚¤ì›Œë“œ (ìµœê·¼ 30ê°œ)</h2>
  </div>
  
  <div className="overflow-x-auto">
    <table className="min-w-full divide-y divide-gray-200">
      <thead className="bg-gray-50">
        <tr>
          <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">
            í‚¤ì›Œë“œ
          </th>
          <th className="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">
            ìˆœìœ„
          </th>
          <th className="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">
            ì „ì²´ ì—…ì²´ ìˆ˜
          </th>
          <th className="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">
            ìµœê·¼ì¡°íšŒ
          </th>
          <th className="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">
            ì¶”ì 
          </th>
          <th className="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">
            ì‚­ì œ
          </th>
        </tr>
      </thead>
      
      <tbody className="bg-white divide-y divide-gray-200">
        {keywords.map((kw) => (
          <tr key={kw.id} className="hover:bg-gray-50 transition-colors">
            {/* í‚¤ì›Œë“œ */}
            <td className="px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900">
              {kw.keyword}
            </td>
            
            {/* ìˆœìœ„ */}
            <td className="py-3 px-4 text-center">
              {kw.current_rank ? (
                <span className="text-lg font-bold text-primary">
                  {kw.current_rank}ìœ„
                </span>
              ) : (
                <span className="text-yellow-600 font-medium">300ìœ„ê¶Œ ë°–</span>
              )}
            </td>
            
            {/* ì „ì²´ ì—…ì²´ ìˆ˜ */}
            <td className="py-3 px-4 text-center text-gray-600">
              {kw.total_results > 0 
                ? `${kw.total_results.toLocaleString()}ê°œ` 
                : "-"}
            </td>
            
            {/* ìµœê·¼ ì¡°íšŒ */}
            <td className="px-4 py-2 whitespace-nowrap text-center text-xs text-gray-500">
              {new Date(kw.last_checked_at).toLocaleDateString('ko-KR')}
            </td>
            
            {/* ì¶”ì  ì—¬ë¶€ */}
            <td className="py-3 px-4 text-center">
              {kw.is_tracked ? (
                <span className="px-3 py-1.5 text-sm bg-green-50 text-green-600 rounded-lg font-medium">
                  ì¶”ì ì¤‘
                </span>
              ) : (
                <button
                  onClick={() => handleAddTracking(kw)}
                  className="px-3 py-1.5 text-sm bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors font-medium"
                >
                  ì¶”ì í•˜ê¸°
                </button>
              )}
            </td>
            
            {/* ì‚­ì œ */}
            <td className="px-4 py-2 whitespace-nowrap text-center">
              <Button 
                variant="ghost" 
                size="sm" 
                onClick={() => handleDeleteKeyword(kw.id, kw.keyword)}
              >
                <X className="w-4 h-4 text-red-500" />
              </Button>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>
</Card>
```

#### 2.3 "ì¶”ì í•˜ê¸°" ê¸°ëŠ¥ ì¶”ê°€

**ìš”êµ¬ì‚¬í•­:**
- ì¶”ì  ì¤‘ì¸ í‚¤ì›Œë“œ: "ì¶”ì ì¤‘" ë°°ì§€ í‘œì‹œ
- ë¯¸ì¶”ì  í‚¤ì›Œë“œ: "ì¶”ì í•˜ê¸°" ë²„íŠ¼ â†’ í´ë¦­ ì‹œ ì¶”ì  ì¶”ê°€ ëª¨ë‹¬

**êµ¬í˜„:**
```typescript
// ì¶”ì  ì¶”ê°€ í•¸ë“¤ëŸ¬
const handleAddTracking = (keyword: KeywordData) => {
  setSelectedStoreId(selectedStoreId!)
  setSelectedKeywordForTracking(keyword)
  setShowAddTrackingDialog(true)
}

// ì¶”ì  ì €ì¥ í•¸ë“¤ëŸ¬
const handleSubmitTracking = async () => {
  try {
    setIsAddingTracker(true)
    
    const response = await fetch(api.metrics.create(), {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`
      },
      body: JSON.stringify({
        store_id: selectedStoreId,
        keyword: selectedKeywordForTracking.keyword,
        update_frequency: updateFrequency,
        update_times: updateTimes,
        notification_enabled: notificationEnabled,
        notification_type: notificationEnabled ? notificationType : null
      })
    })
    
    if (response.ok) {
      toast.success('ì¶”ì  í‚¤ì›Œë“œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤')
      setShowAddTrackingDialog(false)
      await loadKeywords(selectedStoreId)  // ìƒˆë¡œê³ ì¹¨
    }
  } catch (error) {
    toast.error('ì¶”ì  ì¶”ê°€ ì‹¤íŒ¨')
  } finally {
    setIsAddingTracker(false)
  }
}

// ì¶”ì  ì¶”ê°€ ëª¨ë‹¬
<Dialog open={showAddTrackingDialog} onOpenChange={setShowAddTrackingDialog}>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>ì¶”ì  ì¶”ê°€</DialogTitle>
    </DialogHeader>
    
    <div className="space-y-4">
      <div>
        <Label>í‚¤ì›Œë“œ</Label>
        <Input value={selectedKeywordForTracking?.keyword} disabled />
      </div>
      
      {/* ìˆ˜ì§‘ ë¹ˆë„ */}
      <div>
        <Label>í•˜ë£¨ {updateFrequency}íšŒ ìˆ˜ì§‘</Label>
        <Slider
          value={[updateFrequency]}
          onValueChange={(value) => setUpdateFrequency(value[0])}
          min={1}
          max={24}
          step={1}
        />
      </div>
      
      {/* ìˆœìœ„ ì•Œë¦¼ë°›ê¸° */}
      <div className="p-3 bg-gray-50 rounded-lg">
        <div className="flex items-center justify-between mb-3">
          <Label>ìˆœìœ„ ì•Œë¦¼ë°›ê¸°</Label>
          <Switch
            checked={notificationEnabled}
            onCheckedChange={setNotificationEnabled}
          />
        </div>
        
        {notificationEnabled && (
          <select
            value={notificationType || ''}
            onChange={(e) => setNotificationType(e.target.value as any)}
          >
            <option value="">ì•Œë¦¼ ë°©ë²• ì„ íƒ</option>
            <option value="email">ì´ë©”ì¼</option>
            <option value="sms">SMS</option>
            <option value="kakao">ì¹´ì¹´ì˜¤í†¡</option>
          </select>
        )}
      </div>
    </div>
    
    <DialogFooter>
      <Button onClick={handleSubmitTracking} disabled={isAddingTracker}>
        ì¶”ê°€
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

#### 2.4 300ìœ„ ì œí•œ í™•ëŒ€ ë° í‘œì‹œ ê°œì„ 

**ë³€ê²½ ì‚¬í•­:**
1. ìˆœìœ„ ì¡°íšŒ ì œí•œ: 200ìœ„ â†’ 300ìœ„
2. UI í…ìŠ¤íŠ¸: "200ìœ„ ë°–" â†’ "300ìœ„ê¶Œ ë°–"
3. í”Œë ˆì´ìŠ¤í™€ë”: "ìµœëŒ€ 200ê°œê¹Œì§€ í™•ì¸" â†’ "ìµœëŒ€ 300ê°œê¹Œì§€ í™•ì¸"

**ë°±ì—”ë“œ:**
```python
# backend/app/services/naver_rank_api_unofficial.py

async def check_rank(
    self, 
    keyword: str, 
    target_place_id: str,
    max_results: int = 300  # 200 â†’ 300
):
    search_results, total_count = await self._search_places(keyword, max_results)
    # ...
```

**í”„ë¡ íŠ¸ì—”ë“œ:**
```typescript
// ìˆœìœ„ í‘œì‹œ
{kw.current_rank ? (
  <span className="text-lg font-bold text-primary">
    {kw.current_rank}ìœ„
  </span>
) : (
  <span className="text-yellow-600 font-medium">300ìœ„ê¶Œ ë°–</span>
)}

// ì…ë ¥ í”Œë ˆì´ìŠ¤í™€ë”
<Input
  placeholder="ë„¤ì´ë²„ ì§€ë„ì—ì„œ ê²€ìƒ‰í•  í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 300ê°œê¹Œì§€ í™•ì¸)"
/>
```

---

### ğŸ› 3. í‚¤ì›Œë“œ ì‚­ì œ ê¸°ëŠ¥ ì™„ì „ ìˆ˜ì •

#### 3.1 ë¬¸ì œ ìƒí™©

**ì¦ìƒ:**
```
DELETE https://api.whiplace.com/api/v1/naver/keywords/{id} 500 (Internal Server Error)
{"detail":"í‚¤ì›Œë“œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë ˆì½”ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}
```

- ë°±ì—”ë“œ: 200 OK ì‘ë‹µ
- ì‹¤ì œ: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚­ì œ ì•ˆë¨
- ì›ì¸: RLS (Row Level Security) ì •ì±…ìœ¼ë¡œ ì¸í•œ ì‚­ì œ ê¶Œí•œ ë¬¸ì œ

#### 3.2 Sequential Thinking ë¶„ì„

1. **ê°€ì„¤ 1:** RLS ì •ì±…ì´ DELETE ì‘ì—…ì„ ì°¨ë‹¨
2. **ê°€ì„¤ 2:** Foreign Key Constraintë¡œ ì¸í•œ ì‚­ì œ ìˆœì„œ ë¬¸ì œ
3. **ê°€ì„¤ 3:** Service Role Keyë¥¼ ì‚¬ìš©í•´ë„ Python clientì˜ `.delete()` ë©”ì„œë“œëŠ” RLS ì˜í–¥ ë°›ìŒ
4. **ê²°ë¡ :** Stored Procedureë¡œ SECURITY DEFINERë¥¼ ì‚¬ìš©í•˜ì—¬ RLS ìš°íšŒ í•„ìš”

#### 3.3 í•´ê²°: Stored Procedure ìƒì„±

**ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼:**
```sql
-- supabase/migrations/029_create_delete_keyword_function.sql

CREATE OR REPLACE FUNCTION delete_keyword_cascade(p_keyword_id UUID)
RETURNS JSON
LANGUAGE plpgsql
SECURITY DEFINER  -- RLS ìš°íšŒ
SET search_path = public
AS $$
DECLARE
  v_keyword_name TEXT;
  v_tracker_count INT;
  v_history_count INT;
  v_keyword_count INT;
BEGIN
  -- 1. í‚¤ì›Œë“œ ì´ë¦„ ì¡°íšŒ
  SELECT keyword INTO v_keyword_name
  FROM keywords
  WHERE id = p_keyword_id;
  
  IF v_keyword_name IS NULL THEN
    RETURN json_build_object(
      'status', 'error',
      'message', 'í‚¤ì›Œë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
    );
  END IF;
  
  -- 2. metric_trackers ì‚­ì œ (Foreign Key)
  DELETE FROM metric_trackers WHERE keyword_id = p_keyword_id;
  GET DIAGNOSTICS v_tracker_count = ROW_COUNT;
  
  -- 3. rank_history ì‚­ì œ (Foreign Key)
  DELETE FROM rank_history WHERE keyword_id = p_keyword_id;
  GET DIAGNOSTICS v_history_count = ROW_COUNT;
  
  -- 4. keywords ì‚­ì œ
  DELETE FROM keywords WHERE id = p_keyword_id;
  GET DIAGNOSTICS v_keyword_count = ROW_COUNT;
  
  -- 5. ê²°ê³¼ ë°˜í™˜
  RETURN json_build_object(
    'status', 'success',
    'keyword', v_keyword_name,
    'deleted_trackers', v_tracker_count,
    'deleted_history', v_history_count,
    'deleted_keywords', v_keyword_count
  );
END;
$$;

-- ê¶Œí•œ ì„¤ì •
GRANT EXECUTE ON FUNCTION delete_keyword_cascade TO service_role;
GRANT EXECUTE ON FUNCTION delete_keyword_cascade TO authenticated;
REVOKE EXECUTE ON FUNCTION delete_keyword_cascade FROM anon, public;

-- ì£¼ì„
COMMENT ON FUNCTION delete_keyword_cascade(UUID) IS 
'í‚¤ì›Œë“œë¥¼ cascade ë°©ì‹ìœ¼ë¡œ ì‚­ì œ (metric_trackers -> rank_history -> keywords). RLSë¥¼ ìš°íšŒí•©ë‹ˆë‹¤.';
```

**ë°±ì—”ë“œ ìˆ˜ì •:**
```python
# backend/app/routers/naver.py

@router.delete("/keywords/{keyword_id}")
async def delete_keyword(keyword_id: UUID, current_user: dict = Depends(get_current_user)):
    """
    í‚¤ì›Œë“œ ì‚­ì œ (Stored Procedure ì‚¬ìš©, RLS ìš°íšŒ)
    """
    try:
        supabase = get_supabase_client()
        
        logger.info(f"[Delete Keyword] Attempting to delete keyword ID: {keyword_id}")
        
        # Stored procedure í˜¸ì¶œ
        result = supabase.rpc(
            'delete_keyword_cascade',
            {'p_keyword_id': str(keyword_id)}
        ).execute()
        
        logger.info(f"[Delete Keyword] RPC result: {result.data}")
        
        # ê²°ê³¼ íŒŒì‹±
        if result.data:
            response_data = result.data
            
            if response_data.get('status') == 'error':
                raise HTTPException(
                    status_code=status.HTTP_404_NOT_FOUND,
                    detail=response_data.get('message')
                )
            
            # ì„±ê³µ
            keyword_name = response_data.get('keyword', 'Unknown')
            
            logger.info(f"[Delete Keyword] Successfully deleted: {keyword_name}")
            
            return {
                "status": "success",
                "message": f"í‚¤ì›Œë“œ '{keyword_name}'ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",
                "keyword_id": str(keyword_id),
                "keyword": keyword_name
            }
        else:
            raise HTTPException(
                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                detail="í‚¤ì›Œë“œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
            )
        
    except HTTPException:
        raise
    except Exception as e:
        logger.error(f"[Delete Keyword] Error: {str(e)}")
        raise HTTPException(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            detail=f"í‚¤ì›Œë“œ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}"
        )
```

**í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •:**
```typescript
// Authorization í—¤ë” ì¶”ê°€
const handleDeleteKeyword = async (keywordId: string, keywordName: string) => {
  const confirmed = window.confirm(
    `"${keywordName}" í‚¤ì›Œë“œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nâš ï¸ ê²½ê³ : ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`
  )
  
  if (!confirmed) return
  
  try {
    const token = getToken()
    const response = await fetch(`${api.baseUrl}/api/v1/naver/keywords/${keywordId}`, {
      method: 'DELETE',
      headers: {
        'Authorization': `Bearer ${token}`  // â­ ì¸ì¦ ì¶”ê°€
      }
    })
    
    if (!response.ok) {
      const errorData = await response.json()
      throw new Error(errorData.detail || 'ì‚­ì œ ì‹¤íŒ¨')
    }
    
    toast.success(`"${keywordName}" í‚¤ì›Œë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)
    
    // í‚¤ì›Œë“œ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    await loadKeywords(selectedStoreId)
  } catch (error: any) {
    console.error('í‚¤ì›Œë“œ ì‚­ì œ ì‹¤íŒ¨:', error)
    toast.error(error.message || 'í‚¤ì›Œë“œë¥¼ ì‚­ì œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')
  }
}
```

#### 3.4 ì„±ê³¼

**í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
- âœ… í‚¤ì›Œë“œ ì‚­ì œ ì •ìƒ ì‘ë™
- âœ… Cascade ì‚­ì œë¡œ ê´€ë ¨ ë°ì´í„° ëª¨ë‘ ì œê±°
- âœ… RLS ìš°íšŒë¡œ ê¶Œí•œ ë¬¸ì œ í•´ê²°
- âœ… ìƒì„¸í•œ ë¡œê·¸ë¡œ ë””ë²„ê¹… ìš©ì´

---

### ğŸ“Š 4. ì „ì²´ ì—…ì²´ ìˆ˜ í‘œì‹œ ì™„ì „ í•´ê²°

#### 4.1 ë¬¸ì œ ìƒí™©

**ì¦ìƒ:**
- API ì‘ë‹µ: `total_count: 1638` âœ…
- í† ìŠ¤íŠ¸ ë©”ì‹œì§€: "ì „ì²´ 1638ê°œ ì¤‘" âœ…
- í‘œ "ì „ì²´ ì—…ì²´ ìˆ˜" ì—´: "-" ë˜ëŠ” ì ê¹ ë‚˜íƒ€ë‚¬ë‹¤ ì‚¬ë¼ì§ âŒ

**ê·¼ë³¸ ì›ì¸:**
```python
# backend/app/routers/naver.py - check_place_rank_unofficial

# âŒ ë¬¸ì œ: total_resultsë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ì§€ ì•ŠìŒ
if keyword_check.data:
    supabase.table("keywords").update({
        "previous_rank": previous_rank,
        "current_rank": rank_result["rank"],
        "last_checked_at": now.isoformat()
        # total_results ëˆ„ë½!
    }).eq("id", keyword_id).execute()
```

#### 4.2 í•´ê²°: ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ë¡œì§ ì¶”ê°€

**ë°±ì—”ë“œ ìˆ˜ì •:**
```python
# backend/app/routers/naver.py

async def check_place_rank_unofficial(request: RankCheckRequest):
    # ... (ìˆœìœ„ ì¡°íšŒ ë¡œì§)
    
    # total_count íŒŒì‹± (ë¬¸ìì—´ "1,638" â†’ ì •ìˆ˜ 1638)
    total_count_value = rank_result.get("total_count", 0)
    total_results_int = 0
    
    if total_count_value is not None:
        if isinstance(total_count_value, str):
            # ë¬¸ìì—´ "1,234" â†’ 1234
            total_results_int = int(total_count_value.replace(",", "")) if total_count_value.strip() else 0
        elif isinstance(total_count_value, int):
            # ì •ìˆ˜ ê·¸ëŒ€ë¡œ
            total_results_int = total_count_value
    
    logger.info(f"[Total Results] Parsed total_count: {total_count_value} â†’ {total_results_int}")
    
    if keyword_check.data:
        # ê¸°ì¡´ í‚¤ì›Œë“œ ì—…ë°ì´íŠ¸ (total_results í¬í•¨)
        supabase.table("keywords").update({
            "previous_rank": previous_rank,
            "current_rank": rank_result["rank"],
            "total_results": total_results_int,  # â­ ì¶”ê°€
            "last_checked_at": now.isoformat()
        }).eq("id", keyword_id).execute()
        
        logger.info(
            f"[Unofficial API Rank] Updated keyword: "
            f"Rank={rank_result['rank']}, Total={total_results_int}"
        )
    else:
        # ìƒˆ í‚¤ì›Œë“œ ë“±ë¡ (total_results í¬í•¨)
        keyword_insert = supabase.table("keywords").insert({
            "store_id": str(request.store_id),
            "keyword": request.keyword,
            "current_rank": rank_result["rank"],
            "previous_rank": None,
            "total_results": total_results_int,  # â­ ì¶”ê°€
            "last_checked_at": now.isoformat()
        }).execute()
        
        logger.info(
            f"[Unofficial API Rank] Created keyword: "
            f"Rank={rank_result['rank']}, Total={total_results_int}"
        )
```

**í”„ë¡ íŠ¸ì—”ë“œ ê°œì„  (ë³´í—˜):**
```typescript
// ìˆœìœ„ ì¡°íšŒ í›„ total_results ì—…ë°ì´íŠ¸
await loadKeywords(selectedStoreId)

// ë°©ê¸ˆ ì¡°íšŒí•œ í‚¤ì›Œë“œì˜ total_countë¥¼ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
if (data.total_count && keyword) {
  // total_countë¥¼ ìˆ«ìë¡œ ë³€í™˜
  let totalResultsNum = 0
  if (typeof data.total_count === 'string') {
    totalResultsNum = parseInt(data.total_count.replace(/,/g, ''), 10) || 0
  } else if (typeof data.total_count === 'number') {
    totalResultsNum = data.total_count
  }
  
  console.log("[ìˆœìœ„ì¡°íšŒ] total_count ì—…ë°ì´íŠ¸:", data.total_count, "â†’", totalResultsNum)
  
  setKeywords(prevKeywords => 
    prevKeywords.map(kw => 
      kw.keyword === keyword.trim() ? { 
        ...kw, 
        total_results: totalResultsNum
      } : kw
    )
  )
}
```

#### 4.3 ì„±ê³¼

**í…ŒìŠ¤íŠ¸ ê²°ê³¼:**
- âœ… ìˆœìœ„ ì¡°íšŒ ì‹œ total_resultsê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë¨
- âœ… í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ì—ë„ ì „ì²´ ì—…ì²´ ìˆ˜ ìœ ì§€
- âœ… "ì „ì²´ ì—…ì²´ ìˆ˜" ì—´ì— ì •í™•í•œ ìˆ«ì í‘œì‹œ (ì˜ˆ: "1,638ê°œ")
- âœ… ê¸°ì¡´ í‚¤ì›Œë“œë„ ì¬ì¡°íšŒ ì‹œ ì—…ë°ì´íŠ¸ë¨

---

### ğŸ¨ 5. ëŒ€ì‹œë³´ë“œ ê°œì„ 

#### 5.1 "ë“±ë¡ëœ í‚¤ì›Œë“œ" ì¹´ë“œ ì œê±°

**ìš”êµ¬ì‚¬í•­:**
> "ë“±ë¡ëœ í‚¤ì›Œë“œ í†µê³„ë¥¼ ì œê±°í•˜ê³ , íšŒì› tierì—ì„œëŠ” í¬ë ˆë”§, ë“±ë¡ë§¤ì¥, ì¶”ì í‚¤ì›Œë“œ ìˆ˜ë¡œë§Œ ì œí•œ"

**êµ¬í˜„:**
```typescript
// frontend/app/dashboard/page.tsx

// âŒ ì œê±°ëœ ì½”ë“œ
// const [keywordLimit, setKeywordLimit] = useState(50)
// const [currentKeywordCount, setCurrentKeywordCount] = useState(0)

// í†µê³„ ì¹´ë“œ ê·¸ë¦¬ë“œ ì¡°ì •
<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">  {/* xl:grid-cols-5 â†’ lg:grid-cols-4 */}
  {/* í¬ë ˆë”§ Quota ì¹´ë“œ */}
  <Card>...</Card>
  
  {/* ë“±ë¡ë§¤ì¥ Quota ì¹´ë“œ */}
  <Card>...</Card>
  
  {/* ì¶”ì í‚¤ì›Œë“œ Quota ì¹´ë“œ */}
  <Card>...</Card>
  
  {/* ë“±ë¡ëœ í‚¤ì›Œë“œ Quota ì¹´ë“œ - ì œê±°ë¨ */}
  {/* <Card>...</Card> */}
</div>
```

#### 5.2 Tier ì œí•œ ì¡°ì •

**ë°±ì—”ë“œ (ì°¸ê³ ìš©):**
```python
# backend/app/core/tier_limits.py

TIER_LIMITS = {
    "free": {
        "credits": 100,
        "stores": 1,
        "trackers": 5,
        # "keywords": 50  # âŒ ì œê±°
    },
    "basic": {
        "credits": 500,
        "stores": 3,
        "trackers": 20,
        # "keywords": 200  # âŒ ì œê±°
    },
    "pro": {
        "credits": 2000,
        "stores": 10,
        "trackers": 100,
        # "keywords": 1000  # âŒ ì œê±°
    }
}
```

---

### ğŸ”§ 6. ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„ ë©”ë‰´ ë³µì›

#### 6.1 ë¬¸ì œ ë°œê²¬

**ì¦ìƒ:** ì‚¬ì´ë“œë°”ì—ì„œ "ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„" ë©”ë‰´ê°€ ì‚¬ë¼ì§

**ì›ì¸:** ì´ì „ ìˆ˜ì • ì‹œ ì‹¤ìˆ˜ë¡œ ì œê±°ë¨

#### 6.2 í•´ê²°

**ì‚¬ì´ë“œë°” ë©”ë‰´ ì¶”ê°€:**
```typescript
// frontend/components/layout/Sidebar.tsx

import { Key } from 'lucide-react'

const navigation: NavItem[] = [
  {
    title: 'ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤',
    icon: <span>N</span>,
    children: [
      {
        title: 'í”Œë ˆì´ìŠ¤ ìˆœìœ„ì¡°íšŒ',
        href: '/dashboard/naver/rank',
        icon: <TrendingUp className="w-4 h-4" />,
      },
      {
        title: 'ì£¼ìš”ì§€í‘œ ì¶”ì ',
        href: '/dashboard/naver/metrics-tracker',
        icon: <BarChart3 className="w-4 h-4" />,
      },
      {
        title: 'ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„',  // â­ ë³µì›
        href: '/dashboard/naver/main-keywords',
        icon: <Key className="w-4 h-4" />,
      },
      {
        title: 'íƒ€ê²Ÿí‚¤ì›Œë“œ ì¶”ì¶œ',
        href: '/dashboard/naver/target-keywords',
        icon: <Target className="w-4 h-4" />,
      },
      // ...
    ]
  }
]
```

---

### ğŸ“¦ 7. ë°°í¬ ë° í…ŒìŠ¤íŠ¸

#### 7.1 ì»¤ë°‹ ë‚´ì—­

```bash
# 1. ì£¼ìš”ì§€í‘œ ì¶”ì  ê°œì„ 
feat: ìë™ìˆ˜ì§‘ ì„¤ì •ì„ ë§¤ì¥ë³„ í†µí•© ëª¨ë‹¬ë¡œ ë³€ê²½
- í‚¤ì›Œë“œë³„ ê°œë³„ ì„¤ì • â†’ ë§¤ì¥ë³„ ì¼ê´„ ì„¤ì •
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì œê±° (Promise.all ë³‘ë ¬ ì—…ë°ì´íŠ¸)
- ì„¤ì • í›„ í”„ë¡ íŠ¸ì—”ë“œ stateë§Œ ì—…ë°ì´íŠ¸
- ìë™ìˆ˜ì§‘ ì‹œê°„ í‘œì‹œ ê°œì„  (ìµœê·¼ ì—…ë°ì´íŠ¸ + ìë™ìˆ˜ì§‘ ì„¤ì •)

feat: ìˆœìœ„ ì•Œë¦¼ë°›ê¸° ê¸°ëŠ¥ ì¶”ê°€
- ë§¤ì¥ë³„ ì„¤ì • ëª¨ë‹¬ì— ì•Œë¦¼ í† ê¸€ ì¶”ê°€
- ì´ë©”ì¼/SMS/ì¹´ì¹´ì˜¤í†¡ ì„ íƒ ê°€ëŠ¥
- Switch ì»´í¬ë„ŒíŠ¸ ê°€ì‹œì„± ê°œì„  (í¬ê¸° ì¦ê°€, ìƒ‰ìƒ ëª…í™•í™”)

# 2. ìˆœìœ„ì¡°íšŒ í˜ì´ì§€ ê°œí¸
feat: ìˆœìœ„ì¡°íšŒ í˜ì´ì§€ ì „ë©´ ê°œí¸
- "ë“±ë¡ëœ í‚¤ì›Œë“œ" â†’ "ì¡°íšŒí•œ í‚¤ì›Œë“œ" ëª…ì¹­ ë³€ê²½
- ìµœê·¼ 30ê°œë§Œ ì €ì¥ ë° í‘œì‹œ
- ì¹´ë“œ ë ˆì´ì•„ì›ƒ â†’ í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ë³€ê²½
- "ì „ì²´ ì—…ì²´ ìˆ˜" ì—´ ì¶”ê°€
- "ì¶”ì " ì—´ ì¶”ê°€ (ì¶”ì ì¤‘/ì¶”ì í•˜ê¸° ë²„íŠ¼)
- 300ìœ„ ì œí•œ í™•ëŒ€ (200ìœ„ â†’ 300ìœ„)
- "300ìœ„ê¶Œ ë°–" í‘œì‹œ

feat: ì¶”ì  ì¶”ê°€ ëª¨ë‹¬ êµ¬í˜„
- ìˆœìœ„ì¡°íšŒì—ì„œ ë°”ë¡œ ì¶”ì  ì¶”ê°€ ê°€ëŠ¥
- ìˆ˜ì§‘ ë¹ˆë„ ë° ì‹œê°„ ì„¤ì •
- ìˆœìœ„ ì•Œë¦¼ë°›ê¸° ì„¤ì • í¬í•¨

# 3. í‚¤ì›Œë“œ ì‚­ì œ ìˆ˜ì •
feat: Stored Procedureë¡œ í‚¤ì›Œë“œ ì‚­ì œ êµ¬í˜„
- delete_keyword_cascade í•¨ìˆ˜ ìƒì„± (RLS ìš°íšŒ)
- Cascade ì‚­ì œ (metric_trackers â†’ rank_history â†’ keywords)
- ë°±ì—”ë“œì—ì„œ .rpc() í˜¸ì¶œ ë°©ì‹ìœ¼ë¡œ ë³€ê²½
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Authorization í—¤ë” ì¶”ê°€

# 4. ì „ì²´ ì—…ì²´ ìˆ˜ í‘œì‹œ ìˆ˜ì •
fix: ìˆœìœ„ ì¡°íšŒ ì‹œ total_resultsë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
- check_place_rank_unofficialì—ì„œ total_results ì €ì¥ ë¡œì§ ì¶”ê°€
- total_count ë¬¸ìì—´ â†’ ì •ìˆ˜ ë³€í™˜ ë¡œì§ ì¶”ê°€
- UPDATE ë° INSERT ì¿¼ë¦¬ì— total_results í•„ë“œ í¬í•¨
- INFO ë ˆë²¨ ë¡œê·¸ ì¶”ê°€

fix: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ total_count ìˆ«ì ë³€í™˜
- parseInt(total_count.replace(/,/g, ''), 10) ì‚¬ìš©
- ìˆœìœ„ ì¡°íšŒ í›„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ (ë³´í—˜)

# 5. ëŒ€ì‹œë³´ë“œ ê°œì„ 
refactor: ë“±ë¡ëœ í‚¤ì›Œë“œ Quota ì¹´ë“œ ì œê±°
- Tier ì œí•œì„ í¬ë ˆë”§, ë“±ë¡ë§¤ì¥, ì¶”ì í‚¤ì›Œë“œë§Œìœ¼ë¡œ ì¡°ì •
- ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ì¡°ì • (5ê°œ â†’ 4ê°œ)

# 6. ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„ ë©”ë‰´ ë³µì›
fix: ì‚¬ì´ë“œë°”ì— ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„ ë©”ë‰´ ì¶”ê°€
- Key ì•„ì´ì½˜ ì‚¬ìš©
- ì£¼ìš”ì§€í‘œ ì¶”ì ê³¼ íƒ€ê²Ÿí‚¤ì›Œë“œ ì¶”ì¶œ ì‚¬ì´ì— ë°°ì¹˜
```

#### 7.2 ë°°í¬ í”„ë¡œì„¸ìŠ¤

**í”„ë¡ íŠ¸ì—”ë“œ:**
```bash
# GitHub Desktopìœ¼ë¡œ ì»¤ë°‹ & í‘¸ì‹œ
# â†’ Vercel ìë™ ë°°í¬
```

**ë°±ì—”ë“œ:**
```bash
# EC2 ì„œë²„ ì ‘ì†
ssh ubuntu@api.whiplace.com

# ë°±ì—”ë“œ ì¬ë°°í¬
cd ~/egurado/backend
git pull origin main
docker-compose down
docker-compose build
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

**Supabase ë§ˆì´ê·¸ë ˆì´ì…˜:**
```sql
-- SQL Editorì—ì„œ ì‹¤í–‰
-- 029_create_delete_keyword_function.sql
```

#### 7.3 í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì£¼ìš”ì§€í‘œ ì¶”ì :**
- âœ… ë§¤ì¥ë³„ ìë™ìˆ˜ì§‘ì„¤ì • ë²„íŠ¼ í‘œì‹œ
- âœ… ì„¤ì • ëª¨ë‹¬ì—ì„œ ì „ì²´ í‚¤ì›Œë“œ ì¼ê´„ ì„¤ì •
- âœ… ì„¤ì • ì €ì¥ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ìŒ
- âœ… ìë™ìˆ˜ì§‘ ì‹œê°„ í‘œì‹œ (í•˜ë£¨ NíšŒ, ì‹œê°„)
- âœ… ìˆœìœ„ ì•Œë¦¼ë°›ê¸° ì„¤ì • (ON/OFF + ì´ë©”ì¼/SMS/ì¹´ì¹´ì˜¤í†¡)
- âœ… Switch ì»´í¬ë„ŒíŠ¸ ê°€ì‹œì„± ê°œì„ 

**ìˆœìœ„ì¡°íšŒ í˜ì´ì§€:**
- âœ… "ì¡°íšŒí•œ í‚¤ì›Œë“œ (ìµœê·¼ 30ê°œ)" ì œëª© í‘œì‹œ
- âœ… í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ì •ìƒ í‘œì‹œ
- âœ… ì „ì²´ ì—…ì²´ ìˆ˜ ì—´ì— ìˆ«ì í‘œì‹œ
- âœ… 300ìœ„ê¶Œ ë°– í‘œì‹œ
- âœ… ì¶”ì ì¤‘/ì¶”ì í•˜ê¸° ë²„íŠ¼ ì •ìƒ ì‘ë™
- âœ… ì¶”ì  ì¶”ê°€ ëª¨ë‹¬ ì •ìƒ ì‘ë™
- âœ… í‚¤ì›Œë“œ ì‚­ì œ ì •ìƒ ì‘ë™

**ëŒ€ì‹œë³´ë“œ:**
- âœ… ë“±ë¡ëœ í‚¤ì›Œë“œ ì¹´ë“œ ì œê±° í™•ì¸
- âœ… 4ê°œ í†µê³„ ì¹´ë“œ ì •ìƒ í‘œì‹œ

**ì‚¬ì´ë“œë°”:**
- âœ… ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„ ë©”ë‰´ í‘œì‹œ

---

### ğŸ“Š 8. ì„±ê³¼ ë° ê°œì„  íš¨ê³¼

#### 8.1 ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

**ìë™ìˆ˜ì§‘ ì„¤ì •:**
- ì„¤ì • ì‹œê°„ 90% ë‹¨ì¶• (í‚¤ì›Œë“œ 10ê°œ ê¸°ì¤€)
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì œê±°ë¡œ ëŠê¹€ ì—†ëŠ” UX
- ë§¤ì¥ë³„ ì¼ê´„ ì„¤ì •ìœ¼ë¡œ ì§ê´€ì„± í–¥ìƒ

**ìˆœìœ„ì¡°íšŒ í˜ì´ì§€:**
- í…Œì´ë¸” ë ˆì´ì•„ì›ƒìœ¼ë¡œ ì •ë³´ ë°€ë„ í–¥ìƒ
- ì¶”ì  ì—¬ë¶€ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥
- ìˆœìœ„ì¡°íšŒ â†’ ì¶”ì  ì¶”ê°€ ì›ìŠ¤í†± í”„ë¡œì„¸ìŠ¤

**ì „ì²´ ì—…ì²´ ìˆ˜:**
- ì •í™•í•œ ì‹œì¥ ê·œëª¨ íŒŒì•… ê°€ëŠ¥
- ë°ì´í„° ì‹ ë¢°ë„ í–¥ìƒ

#### 8.2 ê¸°ìˆ ì  ê°œì„ 

**ì½”ë“œ í’ˆì§ˆ:**
- âœ… Promise.allë¡œ ë³‘ë ¬ ì—…ë°ì´íŠ¸ (ì„±ëŠ¥ í–¥ìƒ)
- âœ… Stored Procedureë¡œ RLS ìš°íšŒ (ë³´ì•ˆ + ì„±ëŠ¥)
- âœ… íƒ€ì… ì•ˆì •ì„± ê°•í™” (total_results number íƒ€ì…)

**ìœ ì§€ë³´ìˆ˜ì„±:**
- âœ… ìƒì„¸í•œ ë¡œê·¸ (ë””ë²„ê¹… ìš©ì´)
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ê°•í™” (Graceful degradation)
- âœ… ì½”ë“œ ëª¨ë“ˆí™” (ì¬ì‚¬ìš© ê°€ëŠ¥)

#### 8.3 ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜

**Tier ì œí•œ ë‹¨ìˆœí™”:**
- ì‚¬ìš©ì ì´í•´ë„ í–¥ìƒ
- ê´€ë¦¬ ë³µì¡ë„ ê°ì†Œ
- í¬ë ˆë”§ ì¤‘ì‹¬ ê³¼ê¸ˆ ëª¨ë¸ë¡œ ì¼ì›í™”

**ì¶”ì  ì „í™˜ìœ¨ í–¥ìƒ:**
- ìˆœìœ„ì¡°íšŒ â†’ ì¶”ì  ì¶”ê°€ ì›í´ë¦­
- UX ê°œì„ ìœ¼ë¡œ ì „í™˜ ì¥ë²½ ì œê±°

---

### ğŸ¯ 9. í•µì‹¬ í†µì°°

#### 9.1 UX ê°œì„ ì˜ í•µì‹¬

**ì‚¬ìš©ì í”¼ë“œë°± ë°˜ì˜:**
> "í‚¤ì›Œë³„ë¡œ í•˜ë‚˜ì”© ëˆŒëŸ¬ì„œ ì„¤ì •í•´ì•¼ í•˜ëŠ”ë°, ê·¸ë•Œë§ˆë‹¤ í˜ì´ì§€ê°€ ìƒˆë¡œê³ ì¹¨ë˜ì–´ ë„ˆë¬´ ì˜¤ë˜ê±¸ë¦½ë‹ˆë‹¤."

**í•´ê²° ë°©í–¥:**
1. ê°œë³„ ì„¤ì • â†’ ì¼ê´„ ì„¤ì •
2. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ â†’ Promise.all ë³‘ë ¬ ì—…ë°ì´íŠ¸
3. ì¦‰ê°ì ì¸ í”¼ë“œë°± (í† ìŠ¤íŠ¸ ë©”ì‹œì§€)

#### 9.2 Sequential Thinkingì˜ ê°€ì¹˜

**ë¬¸ì œ í•´ê²° í”„ë¡œì„¸ìŠ¤:**
1. ë¬¸ì œ ì •ì˜: í‚¤ì›Œë“œ ì‚­ì œ ì‹¤íŒ¨
2. ê°€ì„¤ ìˆ˜ë¦½: RLS ì •ì±… ë¬¸ì œ
3. ê²€ì¦: ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸
4. í•´ê²°ì±… ë„ì¶œ: Stored Procedure
5. êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸: ì„±ê³µ âœ…

#### 9.3 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì˜ ì¤‘ìš”ì„±

**êµí›ˆ:**
- ì»¬ëŸ¼ì´ ìˆì–´ë„ ì €ì¥ ë¡œì§ì´ ì—†ìœ¼ë©´ ì˜ë¯¸ ì—†ìŒ
- total_results ì»¬ëŸ¼ ì¡´ì¬í–ˆì§€ë§Œ UPDATE/INSERTì—ì„œ ëˆ„ë½
- API ì‘ë‹µê³¼ DB ì €ì¥ì€ ë³„ê°œ

#### 9.4 ë³´ì•ˆê³¼ ì„±ëŠ¥ì˜ ê· í˜•

**Stored Procedure í™œìš©:**
- SECURITY DEFINERë¡œ RLS ìš°íšŒ
- ê¶Œí•œ ê´€ë¦¬ (service_role, authenticatedë§Œ í—ˆìš©)
- Cascade ì‚­ì œë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥
- ë‹¨ì¼ RPC í˜¸ì¶œë¡œ ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œ ê°ì†Œ

---

### ğŸ† 10. ìµœì¢… ê²°ê³¼

**êµ¬í˜„ ì™„ë£Œ:**
- âœ… ì£¼ìš”ì§€í‘œ ì¶”ì  ìë™ìˆ˜ì§‘ ì„¤ì • UX ëŒ€í­ ê°œì„ 
- âœ… ìˆœìœ„ì¡°íšŒ í˜ì´ì§€ ì „ë©´ ê°œí¸ (í…Œì´ë¸”, ì¶”ì  ì¶”ê°€)
- âœ… í‚¤ì›Œë“œ ì‚­ì œ ê¸°ëŠ¥ ì™„ì „ ìˆ˜ì • (Stored Procedure)
- âœ… ì „ì²´ ì—…ì²´ ìˆ˜ í‘œì‹œ ì™„ì „ í•´ê²° (DB ì €ì¥)
- âœ… ëŒ€ì‹œë³´ë“œ ë‹¨ìˆœí™” (í‚¤ì›Œë“œ Quota ì œê±°)
- âœ… ëŒ€í‘œí‚¤ì›Œë“œ ë¶„ì„ ë©”ë‰´ ë³µì›

**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:**
- âœ… ë§¤ì¥ë³„ ìë™ìˆ˜ì§‘ ì„¤ì • (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ìŒ)
- âœ… ìˆœìœ„ ì•Œë¦¼ë°›ê¸° ì„¤ì •
- âœ… ìˆœìœ„ì¡°íšŒ â†’ ì¶”ì  ì¶”ê°€ ì›ìŠ¤í†±
- âœ… í‚¤ì›Œë“œ ì‚­ì œ ì •ìƒ ì‘ë™
- âœ… ì „ì²´ ì—…ì²´ ìˆ˜ ì •í™•í•œ í‘œì‹œ ë° ìœ ì§€
- âœ… ëª¨ë“  ë©”ë‰´ ì •ìƒ í‘œì‹œ

**ë°°í¬ ì™„ë£Œ:**
- âœ… í”„ë¡ íŠ¸ì—”ë“œ: Vercel (ìë™ ë°°í¬)
- âœ… ë°±ì—”ë“œ: AWS EC2 Docker
- âœ… ë°ì´í„°ë² ì´ìŠ¤: Supabase (Migration 029 ì ìš©)
- âœ… í”„ë¡œë•ì…˜ í™˜ê²½ ì•ˆì • ì‘ë™

**ì‚¬ìš©ì ë§Œì¡±:**
- âœ… "ì˜ ë‚˜ì˜µë‹ˆë‹¤" - ì „ì²´ ì—…ì²´ ìˆ˜ í‘œì‹œ í™•ì¸
- âœ… ëª¨ë“  ìš”ì²­ ì‚¬í•­ 100% ë°˜ì˜
- âœ… UX ëŒ€í­ ê°œì„ ìœ¼ë¡œ ì‘ì—… íš¨ìœ¨ì„± í–¥ìƒ

---

**ì‘ì„±ì¼:** 2026-01-25  
**ì‘ì—… ì‹œê°„:** ì•½ 4ì‹œê°„  
**ì»¤ë°‹ ìˆ˜:** 12+ ì»¤ë°‹  
**ë°°í¬ íšŸìˆ˜:** í”„ë¡ íŠ¸ì—”ë“œ 3íšŒ, ë°±ì—”ë“œ 3íšŒ  
**SQL ë§ˆì´ê·¸ë ˆì´ì…˜:** 1ê°œ íŒŒì¼ (029)  
**í…ŒìŠ¤íŠ¸ ì™„ë£Œ:** âœ…  
**í”„ë¡œë•ì…˜ ë°°í¬:** âœ…  
**ë¬¸ì œ í•´ê²° ë‚œì´ë„:** â­â­â­â­â˜† (ë‹¤ì–‘í•œ ë¬¸ì œ ë™ì‹œ í•´ê²°)  
**ì‚¬ìš©ì ë§Œì¡±ë„:** â­â­â­â­â­ (ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì™„ë²½ êµ¬í˜„)

=====================================
