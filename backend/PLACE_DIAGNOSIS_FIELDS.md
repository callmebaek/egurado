# 플레이스 진단 - 가져올 수 있는 모든 정보

## 📊 데이터 소스별 정보

### 1️⃣ GraphQL API (신API - 빠름)

#### ✅ Places Search Query
```graphql
query getPlacesList($input: PlacesInput) {
    places(input: $input) {
        items {
            id                      # 플레이스 ID
            name                    # 매장명
            category                # 카테고리
            address                 # 지번 주소
            roadAddress             # 도로명 주소
            x                       # 경도
            y                       # 위도
            imageUrl                # 대표 이미지
            visitorReviewScore      # ⭐ 평점 (일부 매장)
            visitorReviewCount      # 방문자 리뷰 수
            blogCafeReviewCount     # 블로그 리뷰 수
            bookingUrl              # 예약 URL
            bookingReviewCount      # 예약 리뷰 수
            virtualPhone            # ⭐ 전화번호
            distance                # 거리
            imageCount              # 이미지 개수
        }
    }
}
```

**가져올 수 있는 정보:**
- ✅ **기본 정보**: 매장명, 카테고리, 주소, 도로명주소
- ✅ **연락처**: 전화번호 (virtualPhone) - 100% 성공
- ✅ **위치**: 경도(x), 위도(y)
- ✅ **평점/리뷰**: 평점 (33% 매장), 방문자/블로그/예약 리뷰 수
- ✅ **미디어**: 대표 이미지, 이미지 개수
- ✅ **예약**: 예약 URL

**성공률**: 평균 37.1% (13-14/35 필드)

---

### 2️⃣ HTML 파싱 (window.__APOLLO_STATE__ - 느림, 더 상세함)

#### ✅ PlaceDetailBase
```json
{
  "id": "37942234",
  "name": "인사동마늘보쌈",
  "category": "족발,보쌈",
  "categoryCode": "221504",
  "address": "서울 종로구 관훈동 29-4",
  "roadAddress": "서울 종로구 인사동8길 12-5",
  "coordinate": {
    "x": "126.9861892",
    "y": "37.5739819"
  },
  "visitorReviewsTotal": 1967,
  "visitorReviewsScore": 4.59,
  "conveniences": [
    "예약",
    "단체 이용 가능",
    "포장",
    "무선 인터넷",
    "배달",
    "남/녀 화장실 구분"
  ],
  "paymentInfo": [
    "제로페이"
  ],
  "microReviews": [
    "마늘소스와 함께하는 풍미 가득한 보쌈"
  ],
  "road": "< 안국역에서 오시는길 > ... 상세한 길 안내 ...",
  "businessHours": [
    {
      "day": "일",
      "businessHours": { "start": "11:00", "end": "22:00" },
      "breakHours": [ ... ]
    },
    ...
  ]
}
```

**추가로 가져올 수 있는 정보:**
- ✅ **편의시설**: 예약, 단체이용, 포장, 배달, WiFi, 주차, 화장실 등
- ✅ **영업시간**: 요일별 영업시간 + 브레이크타임
- ✅ **결제수단**: 제로페이, 카드 등
- ✅ **마이크로 리뷰**: 한줄 요약 리뷰
- ✅ **길 안내**: 상세한 찾아오는 길
- ✅ **메뉴**: 메뉴명, 가격, 설명, 이미지
- ✅ **사진**: 매장 사진들

---

### 3️⃣ Visitor Reviews Query
```graphql
query getVisitorReviews($input: VisitorReviewsInput) {
    visitorReviews(input: $input) {
        total
        items {
            businessName
            rating
            content
            author
            created
        }
    }
}
```

**가져올 수 있는 정보:**
- ✅ **리뷰 통계**: 총 리뷰 수
- ✅ **최신 매장명**: 리뷰에서 추출한 최신 매장명
- ✅ **개별 리뷰**: 평점, 내용, 작성자, 작성일

---

## 📈 최종 정보 매트릭스

| 카테고리 | 필드명 | GraphQL | HTML 파싱 | 비고 |
|---------|--------|---------|----------|------|
| **기본** | 매장명 | ✅ | ✅ | |
| | 카테고리 | ✅ | ✅ | |
| | 주소 | ✅ | ✅ | |
| | 도로명 주소 | ✅ | ✅ | |
| | Place ID | ✅ | ✅ | |
| **연락** | 전화번호 | ✅ | ❌ | virtualPhone |
| | 홈페이지 | ❌ | ⚠️ | 일부 |
| **위치** | 위도 | ✅ | ✅ | |
| | 경도 | ✅ | ✅ | |
| **평점** | 평점 | ⚠️ | ✅ | GraphQL 33% |
| | 방문자 리뷰 수 | ✅ | ✅ | |
| | 블로그 리뷰 수 | ✅ | ✅ | |
| | 예약 리뷰 수 | ✅ | ✅ | |
| **영업** | 영업시간 | ❌ | ✅ | 요일별 |
| | 브레이크타임 | ❌ | ✅ | |
| | 라스트오더 | ❌ | ✅ | |
| | 영업 상태 | ❌ | ✅ | |
| **편의** | 편의시설 | ❌ | ✅ | 6개 항목 |
| | 결제수단 | ❌ | ✅ | |
| **메뉴** | 메뉴 리스트 | ❌ | ✅ | 21개 |
| | 메뉴 가격 | ❌ | ✅ | |
| | 메뉴 설명 | ❌ | ✅ | |
| | 메뉴 이미지 | ❌ | ✅ | |
| **미디어** | 대표 이미지 | ✅ | ✅ | |
| | 이미지 개수 | ✅ | ✅ | |
| | 파노라마 | ❌ | ✅ | |
| **기타** | 예약 URL | ✅ | ✅ | |
| | 마이크로 리뷰 | ❌ | ✅ | 한줄요약 |
| | 길 안내 | ❌ | ✅ | 상세 |
| | 쿠폰/프로모션 | ✅ | ❌ | 별도 쿼리 |

---

## 🎯 권장 구현 방식

### Phase 1: 빠른 진단 (GraphQL만)
- **속도**: 매우 빠름 (1-2초)
- **정보량**: 37% (13-14/35 필드)
- **장점**: 서버 부담 적음, 안정적
- **단점**: 영업시간, 메뉴, 편의시설 없음

### Phase 2: 상세 진단 (GraphQL + HTML 파싱)
- **속도**: 느림 (3-5초)
- **정보량**: 80%+ (28-30/35 필드)
- **장점**: 거의 모든 정보 확보
- **단점**: 서버 부담 큼, HTML 구조 변경 시 깨질 수 있음

### Phase 3: 완전 진단 (위 + 추가 쿼리)
- **속도**: 매우 느림 (5-10초)
- **정보량**: 95%+ (33+/35 필드)
- **장점**: 쿠폰, 공지사항 등 모든 정보
- **단점**: 매우 느림, 복잡함

---

## 💡 추천

**일반 사용자**: Phase 1 (GraphQL만)
**Pro 사용자**: Phase 2 (GraphQL + HTML 파싱)
**분석가**: Phase 3 (모든 데이터)

또는 **사용자 선택 옵션** 제공:
- "빠른 진단" (Phase 1)
- "상세 진단" (Phase 2) - 권장
- "완전 진단" (Phase 3)
