# 타겟 키워드 추출 및 진단 기능 구현 완료

## 📋 구현 개요

매장에 집중해야 할 키워드를 검색량 기반으로 추천하고, SEO 최적화 상태를 분석하는 기능입니다.

## ✅ 구현 완료 항목

### 1. Backend 구현

#### 서비스 파일
- `backend/app/services/naver_target_keyword_service.py`
  - 타겟 키워드 분석 메인 로직
  - 키워드 조합 생성
  - 검색량 조회 (배치 처리)
  - SEO 분석 (플레이스 정보에서 키워드 매칭)

#### API 라우터
- `backend/app/routers/target_keywords.py`
  - POST `/api/v1/target-keywords/analyze` 엔드포인트
  - 요청: store_id, user_id, 키워드 정보 (지역명, 랜드마크, 메뉴, 업종, 기타)
  - 응답: 타겟 키워드 리스트, SEO 분석 결과

#### main.py 라우터 등록
- `backend/app/main.py`에 target_keywords_router 등록 완료

### 2. Frontend 구현

#### 페이지
- `frontend/app/dashboard/naver/target-keywords/page.tsx`
  - 매장 선택 UI
  - 키워드 입력 폼 (지역명, 랜드마크, 메뉴, 업종, 기타)
  - 분석 결과 표시 (테이블, SEO 분석)
  - 개선 제안 알림

#### UI 컴포넌트 생성
- `frontend/components/ui/alert.tsx` - Alert 컴포넌트
- `frontend/components/ui/table.tsx` - Table 컴포넌트

#### 사이드바 메뉴 추가
- `frontend/components/layout/Sidebar.tsx`
  - "타겟키워드 추출" 메뉴 추가 (대표키워드 분석 바로 아래)
  - 경로: `/dashboard/naver/target-keywords`

## 🔧 주요 기능

### 키워드 조합 로직

자동으로 다음과 같은 조합을 생성합니다:
- **지역명 × 업종** (예: 종로구맛집, 성수카페)
- **지역명 × 메뉴** (예: 종로구보쌈, 성수커피)
- **랜드마크 × 업종** (예: 성수역맛집, 종로타워카페)
- **랜드마크 × 메뉴** (예: 성수역보쌈, 종로타워커피)
- **지역명 × 기타** (예: 종로구회식, 성수데이트)
- **랜드마크 × 기타** (예: 성수역회식, 종로타워데이트)

### 검색량 조회

- 네이버 검색도구 API를 사용하여 각 키워드의 검색량 조회
- 배치 처리 (5개씩)로 효율적으로 처리
- PC + Mobile 검색량 합산

### 상위 키워드 추출

- 전체 검색량 기준으로 상위 10개 키워드 추출
- 내림차순 정렬

### SEO 분석

플레이스 정보에서 키워드 매칭 분석:
- ✅ **메뉴** (menu_list)
- ✅ **편의시설** (conveniences)
- ✅ **대표 한줄평** (microReviews)
- ✅ **업체소개글** (description)
- ✅ **AI 브리핑** (ai_briefing)
- ✅ **찾아오는길** (road)

각 필드별로 키워드 출현 횟수를 카운팅하여 SEO 최적화 상태를 분석합니다.

## 📊 결과 화면 구성

### 1. 분석 설정 카드
- 매장 선택 드롭다운
- 주소 자동 표시 (선택한 매장의 주소)
- 키워드 입력 필드 (태그 형태로 추가/제거)

### 2. 분석 결과 요약
- 매장명
- 생성된 키워드 조합 수
- 추출된 타겟 키워드 수 (10개)

### 3. 타겟 키워드 테이블
다음 정보를 테이블로 표시:
- 순위 (1~10)
- 키워드
- 조합 유형 (배지)
- 구성 요소 (태그)
- PC 검색량
- 모바일 검색량
- 전체 검색량 (강조)
- 경쟁도
- SEO 매칭 여부 (✅ 횟수 / ❌ 없음)

### 4. 플레이스 SEO 분석
각 필드별로 키워드 매칭 현황 표시:
- 필드명 (메뉴, 편의시설, 대표 한줄평, 업체소개글, AI 브리핑, 찾아오는길)
- 총 매칭 횟수
- 키워드별 매칭 횟수

### 5. SEO 최적화 제안
전체 매칭 횟수에 따라 개선 제안 메시지 표시:
- 0회: 키워드 없음 - 추가 필요
- 1~9회: 키워드 부족 - 더 추가 필요
- 10~29회: 적절한 수준 - 부족한 항목 보완
- 30회 이상: 훌륭함 - 유지 관리

## 🚀 사용 방법

### 1. 백엔드 실행
```bash
cd backend
.\venv\Scripts\activate
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. 프론트엔드 실행
```bash
cd frontend
npm run dev
```

### 3. 기능 테스트
1. 로그인: http://localhost:3000/login
2. 사이드바에서 "네이버 플레이스" → "타겟키워드 추출" 클릭
3. 매장 선택 (주소에서 자동으로 구/동 추출됨)
4. 키워드 입력:
   - 지역명: 종로, 성수 등
   - 랜드마크: 성수역, 종로타워 등
   - 메뉴: 보쌈, 커피 등
   - 업종: 맛집, 카페 등
   - 기타: 회식, 데이트 등
5. "타겟 키워드 분석 시작" 버튼 클릭
6. 결과 확인

## 📝 참고사항

### 주소 자동 추출
매장을 선택하면 주소에서 자동으로 구(區)와 동(洞)을 추출하여 지역명에 추가합니다.

### 검색량 API 제한
- 네이버 검색도구 API는 한 번에 최대 5개까지 조회 가능
- 배치 처리로 자동 분할하여 처리
- API 키가 설정되어 있어야 함 (환경변수: `NAVER_SEARCH_AD_API_KEY`, `NAVER_SEARCH_AD_SECRET`, `NAVER_SEARCH_AD_CUSTOMER_ID`)

### 플레이스 정보 조회
- GraphQL API와 HTML 파싱을 통해 플레이스 상세 정보 조회
- 업체소개글, 메뉴, 편의시설, 대표 한줄평 등 수집

## 🔍 디버깅

### Backend 로그 확인
```bash
# backend 터미널에서 실시간 로그 확인
[타겟 키워드] 분석 시작: store_id=...
[타겟 키워드] 키워드 조합 생성
[타겟 키워드] 총 N개 조합 생성
[타겟 키워드] 검색량 조회 시작
[타겟 키워드] 상위 키워드 선정
[타겟 키워드] 플레이스 정보 조회
[타겟 키워드] SEO 분석 시작
[타겟 키워드] 분석 완료
```

### Frontend Console 확인
- 브라우저 개발자 도구 (F12) → Console 탭
- API 요청/응답 확인

## ✨ 완료!

모든 기능이 정상적으로 구현되었습니다. 사용자가 직접 로그인하여 테스트할 수 있습니다.
